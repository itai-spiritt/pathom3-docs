"use strict";(self.webpackChunkpathom_3_docs=self.webpackChunkpathom_3_docs||[]).push([[587],{3905:(e,t,n)=>{n.d(t,{kt:()=>d});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),p=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(n),d=a,h=c["".concat(s,".").concat(d)]||c[d]||m[d]||l;return n?i.createElement(h,r(r({ref:t},u),{},{components:n})):i.createElement(h,r({ref:t},u))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:a,r[1]=o;for(var p=2;p<l;p++)r[p]=n[p];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5070:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var i=n(7462),a=(n(7294),n(3905));const l={title:"Rationale"},r=void 0,o={unversionedId:"rationale",id:"rationale",title:"Rationale",description:"- Eoliphat chat",source:"@site/docs/rationale.mdx",sourceDirName:".",slug:"/rationale",permalink:"/docs/rationale",draft:!1,editUrl:"https://github.com/wilkerlucio/pathom3-docs/edit/master/docs/rationale.mdx",tags:[],version:"current",frontMatter:{title:"Rationale"}},s={},p=[{value:"Entity based modeling dominates the software industry",id:"entity-based-modeling-dominates-the-software-industry",level:2},{value:"Pervasive Entity modeling",id:"pervasive-entity-modeling",level:2},{value:"Our example, the music stream service",id:"our-example-the-music-stream-service",level:2},{value:"Problem with implicit entities",id:"problem-with-implicit-entities",level:3},{value:"Problem with explicit entities",id:"problem-with-explicit-entities",level:3},{value:"Expose the issues",id:"expose-the-issues",level:3},{value:"Show How Attribute modeling can change it",id:"show-how-attribute-modeling-can-change-it",level:2},{value:"inspirations",id:"inspirations",level:2},{value:"increase visibility of the information flow",id:"increase-visibility-of-the-information-flow",level:2},{value:"Pathom schema is bottom-up",id:"pathom-schema-is-bottom-up",level:2},{value:"Pathom design is about the relationship between attributes.",id:"pathom-design-is-about-the-relationship-between-attributes",level:2},{value:"Schema",id:"schema",level:2},{value:"Accessors",id:"accessors",level:2},{value:"Implementors",id:"implementors",level:2},{value:"Why Pathom?",id:"why-pathom",level:2},{value:"Automated Controllers",id:"automated-controllers",level:3},{value:"Clojure/script solution",id:"clojurescript-solution",level:3}],u={toc:p},m="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(m,(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Eoliphat chat")),(0,a.kt)("p",null,"5 whys\n2nth order impact"),(0,a.kt)("p",null,"Why I'm doing this?"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Processing complex information is hard")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Reference")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},'find examples online about bad "required"/"optional" cases'))),(0,a.kt)("p",null,";; idea for example: YNAB reconciliation with bank data"),(0,a.kt)("p",null,"The inspiration for Pathom attribute modeling comes from ",(0,a.kt)("a",{parentName:"p",href:"https://www.w3.org/RDF/"},"RDF"),",\n",(0,a.kt)("a",{parentName:"p",href:"https://www.datomic.com/"},"Datomic")," and ",(0,a.kt)("a",{parentName:"p",href:"https://clojure.org/guides/spec"},"Spec"),"."),(0,a.kt)("h1",{id:"talking-with-thome"},"Talking with Thome"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"bring problems of entity modeling"),(0,a.kt)("li",{parentName:"ul"},"entity modeling is not just OOP",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"C structs are entities"),(0,a.kt)("li",{parentName:"ul"},"REST endpoints are mostly entities")))),(0,a.kt)("p",null,"Pain points"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Implicit Entity Modeling (Duck Typing)",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"JS"),(0,a.kt)("li",{parentName:"ul"},"Ruby"),(0,a.kt)("li",{parentName:"ul"},"Clojure*\n...")))),(0,a.kt)("p",null,":track/id\n:track/duration"),(0,a.kt)("p",null,":foreign-track/duration"),(0,a.kt)("p",null,"Track"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"id"),(0,a.kt)("li",{parentName:"ul"},"title"),(0,a.kt)("li",{parentName:"ul"},"duration")),(0,a.kt)("p",null,"integration between companies, integrating the data"),(0,a.kt)("p",null,"ForeignTrack"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"id"),(0,a.kt)("li",{parentName:"ul"},"title"),(0,a.kt)("li",{parentName:"ul"},"duration")),(0,a.kt)("p",null,"DurationItem {\nduration: int;\n}"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"fn human-track-duration(track) {\n  makeHuman(track.duration)\n}\n\n:foreign-track/duration -> :track/duration\n\nfn human-track-duration(:track/duration) {\n  makeHuman(track.duration)\n}\n\nfn operation(AudioFeaturesInterface) {\n\n}\n")),(0,a.kt)("p",null," REQUIRED / OPTIONAL"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Explicit Entity Modeling (more like OOP)",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Typescript"),(0,a.kt)("li",{parentName:"ul"},"GraphQL"),(0,a.kt)("li",{parentName:"ul"},"Swift\n...")))),(0,a.kt)("h1",{id:"modeling-data-with-attributes"},"Modeling data with attributes"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"plan",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"make logic example"),(0,a.kt)("li",{parentName:"ul"},"point associations"),(0,a.kt)("li",{parentName:"ul"},"demo that entity model makes difficult to make this happen"),(0,a.kt)("li",{parentName:"ul"},"pathom to save the day")))),(0,a.kt)("p",null,"-- trying to get some example on how we deal with logic property inferences on day to day"),(0,a.kt)("p",null,"Soraya is 29 years old."),(0,a.kt)("p",null,"The Clojure keywords have a built-in separation of namespace and name, and Pathom leverages\nit."),(0,a.kt)("p",null,"The answer is surprisingly simple: make attribute names bigger!"),(0,a.kt)("p",null,"How big? It needs to big enough to avoid ambiguity."),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Many ways to identify you:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Your social security number"),(0,a.kt)("li",{parentName:"ul"},"Insurance number"),(0,a.kt)("li",{parentName:"ul"},"Email"),(0,a.kt)("li",{parentName:"ul"},"Address (if you live by yourself)"),(0,a.kt)("li",{parentName:"ul"})),(0,a.kt)("h1",{id:"challenges-to-integrate-distributed-data"},"Challenges to integrate distributed data"),(0,a.kt)("h2",{id:"entity-based-modeling-dominates-the-software-industry"},"Entity based modeling dominates the software industry"),(0,a.kt)("h1",{id:"abstract"},"Abstract"),(0,a.kt)("p",null,"Pathom is a logical design model implemented in Clojure/script. It is designed to eliminate the\ncode related to composing functions in the information layer of your program."),(0,a.kt)("h2",{id:"pervasive-entity-modeling"},"Pervasive Entity modeling"),(0,a.kt)("p",null,"Entity model is a way of thinking about information in terms of entities. We can see\nthis model in almost every kind of software created today."),(0,a.kt)("admonition",{type:"important"},(0,a.kt)("p",{parentName:"admonition"},"I'll be talking about entity modeling only in the context of information modeling.")),(0,a.kt)("p",null,"I like to bring attention to some challenges that I face when I use this method of\nthinking to design information systems."),(0,a.kt)("h2",{id:"our-example-the-music-stream-service"},"Our example, the music stream service"),(0,a.kt)("p",null,"To illustrate the challenges I'll model a generic music stream service:"),(0,a.kt)("p",null,"IMAGE_HERE"),(0,a.kt)("p",null,";;; because I can compare with Apple Music, or Google Play"),(0,a.kt)("h3",{id:"problem-with-implicit-entities"},"Problem with implicit entities"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"you never know if that attribute is really what you expect")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ruby"},'def full_name(person)\n  person.first_name + " " + person.last_name\nend\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},'class Person {\n  id: string;\n  firstName: string;\n  lastName: string;\n}\n\ninterface Nameable {\n  firstName: string;\n  lastName: string;\n}\n\nfunction fullName (person: Person): string {\n  return person.firstName + " " + person.lastName\n}\n\nfunction fullName (person): string {\n  return person.firstName + " " + person.lastName\n}\n')),(0,a.kt)("h3",{id:"problem-with-explicit-entities"},"Problem with explicit entities"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"refactoring is a pain in the ass")),(0,a.kt)("h3",{id:"expose-the-issues"},"Expose the issues"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"repeated types"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"simplified types"),(0,a.kt)("li",{parentName:"ul"},"required vs optional"),(0,a.kt)("li",{parentName:"ul"},"repetition of attribute definition\n-- common pattern, add the ",(0,a.kt)("inlineCode",{parentName:"li"},"type")," attribute"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"connecting different entities")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"operations are tied by entity")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"extracting interfaces is expensive"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"fields with same name, same semantic, different value unit",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"I heard some astronalts had to deal with this"))))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"distinct teams trying to split the same interface")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"hard to cross language boundaries")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"its pervasive even when types are implicit"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"in JS for example, when a fn requires an id, you assume it its the right kind of id\nbecause its implicit (sometimes from the fn name, like userById()).")))),(0,a.kt)("p",null,"when people are afraid of that, then they turn to TypeScript, with Typescript the type\nis explicit, so in this way a compiler can ensure you are consistent with your definitions."),(0,a.kt)("p",null,"situation where we have to integrate with a remote API"),(0,a.kt)("p",null,"GraphQL brought the same entity modeling to the wire. The good thing is that the model\nis now visible."),(0,a.kt)("h2",{id:"show-how-attribute-modeling-can-change-it"},"Show How Attribute modeling can change it"),(0,a.kt)("p",null,"Demo the initial tables, and convert to properties"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"first prefix every property inside the entity with something"),(0,a.kt)("li",{parentName:"ul"},"then remove the boxes"),(0,a.kt)("li",{parentName:"ul"},"now demonstrate how operations get connected directly to attributes")),(0,a.kt)("p",null,"then we only need to connect the parts that our systems need to care about"),(0,a.kt)("p",null,"trivial to alias attributes"),(0,a.kt)("p",null,"never have to compromise some interface for convenience"),(0,a.kt)("p",null,"render page from song"),(0,a.kt)("h2",{id:"inspirations"},"inspirations"),(0,a.kt)("p",null,"Datomic\nRDF\nSpec"),(0,a.kt)("h2",{id:"increase-visibility-of-the-information-flow"},"increase visibility of the information flow"),(0,a.kt)("h2",{id:"pathom-schema-is-bottom-up"},"Pathom schema is bottom-up"),(0,a.kt)("p",null,"It is common for systems to first define a schema, and later they implement that schema\nin some way. In Pathom, the schema is defined by the resolvers upon registration, it\nis more like something that gets add, instead of planned ahead."),(0,a.kt)("h2",{id:"pathom-design-is-about-the-relationship-between-attributes"},"Pathom design is about the relationship between attributes."),(0,a.kt)("p",null,"In Pathom, the resolvers are responsible for defining the attribute connections."),(0,a.kt)("p",null,"Instead of doing schema first, and then implementation, in Pathom, resolvers\ndefine the schema upon registration."),(0,a.kt)("h1",{id:"the-problem-through-example"},"The problem through example"),(0,a.kt)("p",null,"To understand the reasoning around Pathom, let's split our definition of code in two types: Implementors and Composers."),(0,a.kt)("h2",{id:"schema"},"Schema"),(0,a.kt)("h2",{id:"accessors"},"Accessors"),(0,a.kt)("h2",{id:"implementors"},"Implementors"),(0,a.kt)("p",null,"Those are functions that do actual work, like:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Reading data from a database"),(0,a.kt)("li",{parentName:"ul"},"Transforming data"),(0,a.kt)("li",{parentName:"ul"},"Running calculations")),(0,a.kt)("p",null,"This is to me where most of the fun in coding is, the real specific logic about your\napplication."),(0,a.kt)("h2",{id:"why-pathom"},"Why Pathom?"),(0,a.kt)("p",null,"I did"),(0,a.kt)("h3",{id:"automated-controllers"},"Automated Controllers"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"A lot of errors in software come from small mistakes when connecting functions in controllers")),(0,a.kt)("h3",{id:"clojurescript-solution"},"Clojure/script solution"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"With support")))}c.isMDXComponent=!0}}]);