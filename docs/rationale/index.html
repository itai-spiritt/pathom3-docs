<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-rationale">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GZFCYV0DXN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GZFCYV0DXN",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Pathom 3" href="/opensearch.xml"><title data-rh="true">Rationale | Pathom 3</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://pathom3.wsscode.com/docs/rationale"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Rationale | Pathom 3"><meta data-rh="true" name="description" content="- Eoliphat chat"><meta data-rh="true" property="og:description" content="- Eoliphat chat"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://pathom3.wsscode.com/docs/rationale"><link data-rh="true" rel="alternate" href="https://pathom3.wsscode.com/docs/rationale" hreflang="en"><link data-rh="true" rel="alternate" href="https://pathom3.wsscode.com/docs/rationale" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://8YW0ZACTDN-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.50c9537c.css">
<link rel="preload" href="/assets/js/runtime~main.feaca457.js" as="script">
<link rel="preload" href="/assets/js/main.5057d4a7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon_64x64.png" alt="Pathom 3" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/icon_64x64.png" alt="Pathom 3" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Pathom 3</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/media">Media</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Rationale</h1></header><ul><li>Eoliphat chat</li></ul><p>5 whys
2nth order impact</p><p>Why I&#x27;m doing this?</p><ul><li><p>Processing complex information is hard</p></li><li><p>Reference</p></li><li><p>find examples online about bad &quot;required&quot;/&quot;optional&quot; cases</p></li></ul><p>;; idea for example: YNAB reconciliation with bank data</p><p>The inspiration for Pathom attribute modeling comes from <a href="https://www.w3.org/RDF/">RDF</a>,
<a href="https://www.datomic.com/">Datomic</a> and <a href="https://clojure.org/guides/spec">Spec</a>.</p><h1 id="talking-with-thome">Talking with Thome</h1><ul><li>bring problems of entity modeling</li><li>entity modeling is not just OOP<ul><li>C structs are entities</li><li>REST endpoints are mostly entities</li></ul></li></ul><p>Pain points</p><ul><li>Implicit Entity Modeling (Duck Typing)<ul><li>JS</li><li>Ruby</li><li>Clojure*
...</li></ul></li></ul><p>:track/id
:track/duration</p><p>:foreign-track/duration</p><p>Track</p><ul><li>id</li><li>title</li><li>duration</li></ul><p>integration between companies, integrating the data</p><p>ForeignTrack</p><ul><li>id</li><li>title</li><li>duration</li></ul><p>DurationItem {
duration: int;
}</p><pre><code>fn human-track-duration(track) {
  makeHuman(track.duration)
}

:foreign-track/duration -&gt; :track/duration

fn human-track-duration(:track/duration) {
  makeHuman(track.duration)
}

fn operation(AudioFeaturesInterface) {

}
</code></pre><p> REQUIRED / OPTIONAL</p><ul><li>Explicit Entity Modeling (more like OOP)<ul><li>Typescript</li><li>GraphQL</li><li>Swift
...</li></ul></li></ul><h1 id="modeling-data-with-attributes">Modeling data with attributes</h1><ul><li>plan<ul><li>make logic example</li><li>point associations</li><li>demo that entity model makes difficult to make this happen</li><li>pathom to save the day</li></ul></li></ul><p>-- trying to get some example on how we deal with logic property inferences on day to day</p><p>Soraya is 29 years old.</p><p>The Clojure keywords have a built-in separation of namespace and name, and Pathom leverages
it.</p><p>The answer is surprisingly simple: make attribute names bigger!</p><p>How big? It needs to big enough to avoid ambiguity.</p><hr><p>Many ways to identify you:</p><ul><li>Your social security number</li><li>Insurance number</li><li>Email</li><li>Address (if you live by yourself)</li><li></li></ul><h1 id="challenges-to-integrate-distributed-data">Challenges to integrate distributed data</h1><h2 id="entity-based-modeling-dominates-the-software-industry">Entity based modeling dominates the software industry</h2><h1 id="abstract">Abstract</h1><p>Pathom is a logical design model implemented in Clojure/script. It is designed to eliminate the
code related to composing functions in the information layer of your program.</p><h2 id="pervasive-entity-modeling">Pervasive Entity modeling</h2><p>Entity model is a way of thinking about information in terms of entities. We can see
this model in almost every kind of software created today.</p><admonition type="important"><p>I&#x27;ll be talking about entity modeling only in the context of information modeling.</p></admonition><p>I like to bring attention to some challenges that I face when I use this method of
thinking to design information systems.</p><h2 id="our-example-the-music-stream-service">Our example, the music stream service</h2><p>To illustrate the challenges I&#x27;ll model a generic music stream service:</p><p>IMAGE_HERE</p><p>;;; because I can compare with Apple Music, or Google Play</p><h3 id="problem-with-implicit-entities">Problem with implicit entities</h3><ul><li>you never know if that attribute is really what you expect</li></ul><pre><code class="language-ruby">def full_name(person)
  person.first_name + &quot; &quot; + person.last_name
end
</code></pre><pre><code class="language-typescript">class Person {
  id: string;
  firstName: string;
  lastName: string;
}

interface Nameable {
  firstName: string;
  lastName: string;
}

function fullName (person: Person): string {
  return person.firstName + &quot; &quot; + person.lastName
}

function fullName (person): string {
  return person.firstName + &quot; &quot; + person.lastName
}
</code></pre><h3 id="problem-with-explicit-entities">Problem with explicit entities</h3><ul><li>refactoring is a pain in the ass</li></ul><h3 id="expose-the-issues">Expose the issues</h3><ul><li><p>repeated types</p><ul><li>simplified types</li><li>required vs optional</li><li>repetition of attribute definition
-- common pattern, add the <code>type</code> attribute</li></ul></li><li><p>connecting different entities</p></li><li><p>operations are tied by entity</p></li><li><p>extracting interfaces is expensive</p><ul><li>fields with same name, same semantic, different value unit<ul><li>I heard some astronalts had to deal with this</li></ul></li></ul></li><li><p>distinct teams trying to split the same interface</p></li><li><p>hard to cross language boundaries</p></li><li><p>its pervasive even when types are implicit</p><ul><li>in JS for example, when a fn requires an id, you assume it its the right kind of id
because its implicit (sometimes from the fn name, like userById()).</li></ul></li></ul><p>when people are afraid of that, then they turn to TypeScript, with Typescript the type
is explicit, so in this way a compiler can ensure you are consistent with your definitions.</p><p>situation where we have to integrate with a remote API</p><p>GraphQL brought the same entity modeling to the wire. The good thing is that the model
is now visible.</p><h2 id="show-how-attribute-modeling-can-change-it">Show How Attribute modeling can change it</h2><p>Demo the initial tables, and convert to properties</p><ul><li>first prefix every property inside the entity with something</li><li>then remove the boxes</li><li>now demonstrate how operations get connected directly to attributes</li></ul><p>then we only need to connect the parts that our systems need to care about</p><p>trivial to alias attributes</p><p>never have to compromise some interface for convenience</p><p>render page from song</p><h2 id="inspirations">inspirations</h2><p>Datomic
RDF
Spec</p><h2 id="increase-visibility-of-the-information-flow">increase visibility of the information flow</h2><h2 id="pathom-schema-is-bottom-up">Pathom schema is bottom-up</h2><p>It is common for systems to first define a schema, and later they implement that schema
in some way. In Pathom, the schema is defined by the resolvers upon registration, it
is more like something that gets add, instead of planned ahead.</p><h2 id="pathom-design-is-about-the-relationship-between-attributes">Pathom design is about the relationship between attributes.</h2><p>In Pathom, the resolvers are responsible for defining the attribute connections.</p><p>Instead of doing schema first, and then implementation, in Pathom, resolvers
define the schema upon registration.</p><h1 id="the-problem-through-example">The problem through example</h1><p>To understand the reasoning around Pathom, let&#x27;s split our definition of code in two types: Implementors and Composers.</p><h2 id="schema">Schema</h2><h2 id="accessors">Accessors</h2><h2 id="implementors">Implementors</h2><p>Those are functions that do actual work, like:</p><ul><li>Reading data from a database</li><li>Transforming data</li><li>Running calculations</li></ul><p>This is to me where most of the fun in coding is, the real specific logic about your
application.</p><h2 id="why-pathom">Why Pathom?</h2><p>I did</p><h3 id="automated-controllers">Automated Controllers</h3><ul><li>A lot of errors in software come from small mistakes when connecting functions in controllers</li></ul><h3 id="clojurescript-solution">Clojure/script solution</h3><ul><li>With support</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wilkerlucio/pathom3-docs/edit/master/docs/rationale.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#entity-based-modeling-dominates-the-software-industry" class="table-of-contents__link toc-highlight">Entity based modeling dominates the software industry</a></li><li><a href="#pervasive-entity-modeling" class="table-of-contents__link toc-highlight">Pervasive Entity modeling</a></li><li><a href="#our-example-the-music-stream-service" class="table-of-contents__link toc-highlight">Our example, the music stream service</a><ul><li><a href="#problem-with-implicit-entities" class="table-of-contents__link toc-highlight">Problem with implicit entities</a></li><li><a href="#problem-with-explicit-entities" class="table-of-contents__link toc-highlight">Problem with explicit entities</a></li><li><a href="#expose-the-issues" class="table-of-contents__link toc-highlight">Expose the issues</a></li></ul></li><li><a href="#show-how-attribute-modeling-can-change-it" class="table-of-contents__link toc-highlight">Show How Attribute modeling can change it</a></li><li><a href="#inspirations" class="table-of-contents__link toc-highlight">inspirations</a></li><li><a href="#increase-visibility-of-the-information-flow" class="table-of-contents__link toc-highlight">increase visibility of the information flow</a></li><li><a href="#pathom-schema-is-bottom-up" class="table-of-contents__link toc-highlight">Pathom schema is bottom-up</a></li><li><a href="#pathom-design-is-about-the-relationship-between-attributes" class="table-of-contents__link toc-highlight">Pathom design is about the relationship between attributes.</a></li><li><a href="#schema" class="table-of-contents__link toc-highlight">Schema</a></li><li><a href="#accessors" class="table-of-contents__link toc-highlight">Accessors</a></li><li><a href="#implementors" class="table-of-contents__link toc-highlight">Implementors</a></li><li><a href="#why-pathom" class="table-of-contents__link toc-highlight">Why Pathom?</a><ul><li><a href="#automated-controllers" class="table-of-contents__link toc-highlight">Automated Controllers</a></li><li><a href="#clojurescript-solution" class="table-of-contents__link toc-highlight">Clojure/script solution</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Presentations</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/watch?v=YaHiff2vZ_o" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Navigation with Pathom 3<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=IS3i3DTUnAI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2019 - The Maximal Graph<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=yyVKf2U8YVg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2018 - Scaling Full Stack Applications<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=r3zywlNflJI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dutch Clojure Days 2018 - Clojure Graph API’s<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://clojurians.slack.com/messages/pathom/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Wilker Lucio</div></div></div></footer></div>
<script src="/assets/js/runtime~main.feaca457.js"></script>
<script src="/assets/js/main.5057d4a7.js"></script>
</body>
</html>