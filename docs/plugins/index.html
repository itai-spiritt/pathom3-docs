<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GZFCYV0DXN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GZFCYV0DXN",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Pathom 3" href="/opensearch.xml"><title data-react-helmet="true">Plugins | Pathom 3</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Plugins | Pathom 3"><meta data-react-helmet="true" name="description" content="Plugins provide a way to extend Pathom behavior. This page explains how Pathom plugins"><meta data-react-helmet="true" property="og:description" content="Plugins provide a way to extend Pathom behavior. This page explains how Pathom plugins"><meta data-react-helmet="true" property="og:url" content="https://pathom3.wsscode.com/docs/plugins"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://pathom3.wsscode.com/docs/plugins"><link rel="stylesheet" href="/styles.4444d5c6.css">
<link rel="preload" href="/styles.40439ba3.js" as="script">
<link rel="preload" href="/runtime~main.e6e97b8a.js" as="script">
<link rel="preload" href="/main.4a27a30b.js" as="script">
<link rel="preload" href="/1.33e73229.js" as="script">
<link rel="preload" href="/2.ccb31818.js" as="script">
<link rel="preload" href="/4.a2050c74.js" as="script">
<link rel="preload" href="/1be78505.d9c494fe.js" as="script">
<link rel="preload" href="/48.f6e5660d.js" as="script">
<link rel="preload" href="/935f2afb.0ba01e53.js" as="script">
<link rel="preload" href="/17896441.3a0d6633.js" as="script">
<link rel="preload" href="/2a8c400d.cb4c48b6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon_64x64.png" alt="Pathom 3"><strong class="navbar__title">Pathom 3</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a class="navbar__item navbar__link" href="/media">Media</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon_64x64.png" alt="Pathom 3"><strong class="navbar__title">Pathom 3</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/media">Media</a></li><li class="menu__list-item"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial">Pathom Tutorial</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/nouns">Nouns</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Using Pathom</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resolvers">Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-resolvers">Built-in Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/smart-maps">Smart Maps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eql">EQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/environment">Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cache">Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/placeholders">Placeholders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/mutations">Mutations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/error-handling">Error Handling</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/plugins">Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-plugins">Built-in Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/async">Async</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/debugging">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/foreign">Foreign Environments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dynamic-resolvers">Dynamic Resolvers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How Pathom Works</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/indexes">Indexes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/planner">Planner</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/shape-descriptor">Shape Descriptor</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Integrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/integrations/graphql">GraphQL</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/hacker-news-scraper">Hacker News Scraper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/serverless-pathom-gcf">Serverless Pathom with GCF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/babashka">Scripting with Babashka</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/graphql-integration">GraphQL Integration</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Plugins</h1></header><div class="markdown"><p>Plugins provide a way to extend Pathom behavior. This page explains how Pathom plugins
work and how you can write your extensions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="the-wrapping-model-of-plugins"></a>The wrapping model of plugins<a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-wrapping-model-of-plugins" title="Direct link to heading">#</a></h2><p>Pathom extensions work by <code>wrapping</code> code points in Pathom. This means you can code
around the extended points in Pathom.</p><p>Each extension point has an identifier keyword.</p><p>Let&#x27;s take for example the <code>:com.wsscode.pathom3.format.eql/wrap-map-select-entry</code>
extension. This adds a hook to the result masking operation, which occurs at the
end of <code>p.eql/process</code> to filter out the results according to the query.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>It&#x27;s a Pathom convention to prefix all plugin wrapping attributes with <code>wrap-</code>.</p></div></div><p>This hook, in specific, can control how the value is placed at the resulting map.</p><p>Let&#x27;s use this hook to make an extension that protects certain attributes from getting
in the output map:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ns com.wsscode.pathom3.docs.demos.core.plugins</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (:require [com.wsscode.misc.coll :as coll]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [com.wsscode.pathom3.connect.built-in.resolvers :as pbir]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [com.wsscode.pathom3.connect.indexes :as pci]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [com.wsscode.pathom3.interface.eql :as p.eql]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [com.wsscode.pathom3.plugin :as p.plugin]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def protected-attributes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  #{:user/password})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; define the extension wrapper fn</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn protect-attributes-wrapper [mse]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env source {:keys [key] :as ast}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (if (and (contains? source key)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             (contains? protected-attributes key))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ; the output of this extension must be a map entry or nil</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ; a vector with two elements would also work, but creating a map entry is</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ; more efficient</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (coll/make-map-entry key ::protected-value)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (mse env source ast))))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; create the plugin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.plugin/defplugin protect-attributes-plugin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:com.wsscode.pathom3.format.eql/wrap-map-select-entry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   protect-attributes-wrapper})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def users</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {1 {:user/id       1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      :user/name     &quot;User Name&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      :user/password &quot;12345&quot;}})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (-&gt; (p.plugin/register protect-attributes-plugin)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (pci/register [(pbir/static-table-resolver :user/id users)])))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &#x27;[{[:user/id 1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     [:user/name :user/password]}])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; {[:user/id 1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">;     {:user/name     &quot;User Name&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">;      :user/password ::protected-value}}</span></div></div></div></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>The data from those attributes may still leak in the meta for stats, to make
it really secure you need to prevent regular users from seeing the stats.</p></div></div><p>Now let&#x27;s talk in more detail about the things we used in this example.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="define-the-wrapper-fn"></a>Define the wrapper fn<a aria-hidden="true" tabindex="-1" class="hash-link" href="#define-the-wrapper-fn" title="Direct link to heading">#</a></h3><p>A more generic way to think about wrapper extensions is with the following structure:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn wrapper-fn [original-fn]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ; the number of args in the internal-impl depends on which function the plugin is wrapping</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn internal-impl [args]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ; here we are wrapping the original fn, we can both alter its arguments or the return</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ; of it, you can think of the code before the original-fn as the ENTER part, and</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ; the code after (possibly modifying the output) as the LEAVE part.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (original-fn args)))</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="define-the-plugin"></a>Define the plugin<a aria-hidden="true" tabindex="-1" class="hash-link" href="#define-the-plugin" title="Direct link to heading">#</a></h3><p>Then, a plugin consists of one or more of those wrapping functions. Any map can be a
plugin, to make it a plugin, you must add the key <code>::p.plugin/id</code> with a symbol to
identify this plugin. Then each other key is an extension wrapper.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">; using defplugin it defines the var and adds the id to the map</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.plugin/defplugin protect-attributes-plugin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:com.wsscode.pathom3.format.eql/wrap-map-select-entry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   my-wrapper})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; this is how to do the same thing without the macro:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def protect-attributes-plugin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {::p.plugin/id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   `protect-attributes-plugin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.format.eql/wrap-map-select-entry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   my-wrapper})</span></div></div></div></div></div><p>The latter form is interesting when you are generating a plugin programmatically.</p><p>For example, we could make our plugin to protect attributes more configurable by using
making a function that returns the plugin:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn protect-attributes-plugin [protected-attributes]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {::p.plugin/id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   `protect-attributes-plugin</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.format.eql/wrap-map-select-entry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   (fn [mst]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     (fn [env source {:keys [key] :as ast}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       (if (and (contains? source key)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                (contains? protected-attributes key))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         ; the output of this extension must be a map entry or nil</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         ; a vector with two elements would also work, but creating a map entry is</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         ; more efficient</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         (coll/make-map-entry key ::protected-value)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         (mst env source ast))))})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ; create plugin to protect specific attributes and add it</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (-&gt; (p.plugin/register (protect-attributes-plugin #{:user/password}))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (pci/register [(pbir/static-table-resolver :user/id users)])))</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="adding-plugins"></a>Adding plugins<a aria-hidden="true" tabindex="-1" class="hash-link" href="#adding-plugins" title="Direct link to heading">#</a></h2><p>To use a plugin, you must add it to the environment using the <code>p.plugin/register</code> function.</p><p>This function works similar to <code>pci/register</code> and also accepts vectors
of plugins.</p><p>In the case of plugins, there is also <code>p.plugin/register-before</code> and
<code>p.plugin/register-after</code>. Which gives you more control over the plugin execution order.</p><p>In the next section, we will talk more about plugin order.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="plugin-order"></a>Plugin order<a aria-hidden="true" tabindex="-1" class="hash-link" href="#plugin-order" title="Direct link to heading">#</a></h3><p>To understand the order in which plugins execute, it helps to keep the following image
in your head:</p><div class="pathom-diagram"><p>  <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZlcnNpb249IjEuMSIgeG1sbnM6eGw9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9Ijk0NCAzODggMzcyIDQ2NSIgd2lkdGg9IjM3MiIgaGVpZ2h0PSI0NjUiPgogIDxkZWZzPgogICAgPGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIHBhbm9zZS0xPSIyIDAgOCAzIDAgMCAwIDkgMCA0IiB1bml0cy1wZXItZW09IjEwMDAiIHVuZGVybGluZS1wb3NpdGlvbj0iLTEwMCIgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNTAiIHNsb3BlPSIwIiB4LWhlaWdodD0iNTE3IiBjYXAtaGVpZ2h0PSI3MTQiIGFzY2VudD0iOTc1LjAwNjEiIGRlc2NlbnQ9Ii0yMTYuOTk1MjQiIGZvbnQtd2VpZ2h0PSI3MDAiPgogICAgICA8Zm9udC1mYWNlLXNyYz4KICAgICAgICA8Zm9udC1mYWNlLW5hbWUgbmFtZT0iSGVsdmV0aWNhTmV1ZS1Cb2xkIi8+CiAgICAgIDwvZm9udC1mYWNlLXNyYz4KICAgIDwvZm9udC1mYWNlPgogICAgPGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIHBhbm9zZS0xPSIyIDAgNSAzIDAgMCAwIDIgMCA0IiB1bml0cy1wZXItZW09IjEwMDAiIHVuZGVybGluZS1wb3NpdGlvbj0iLTEwMCIgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNTAiIHNsb3BlPSIwIiB4LWhlaWdodD0iNTE3IiBjYXAtaGVpZ2h0PSI3MTQiIGFzY2VudD0iOTUxLjk5NTgiIGRlc2NlbnQ9Ii0yMTIuOTk3NDQiIGZvbnQtd2VpZ2h0PSI0MDAiPgogICAgICA8Zm9udC1mYWNlLXNyYz4KICAgICAgICA8Zm9udC1mYWNlLW5hbWUgbmFtZT0iSGVsdmV0aWNhTmV1ZSIvPgogICAgICA8L2ZvbnQtZmFjZS1zcmM+CiAgICA8L2ZvbnQtZmFjZT4KICAgIDxtYXJrZXIgb3JpZW50PSJhdXRvIiBvdmVyZmxvdz0idmlzaWJsZSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBpZD0iRmlsbGVkQXJyb3dfTWFya2VyIiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHZpZXdCb3g9Ii0xIC00IDEwIDgiIG1hcmtlcldpZHRoPSIxMCIgbWFya2VySGVpZ2h0PSI4IiBjb2xvcj0id2hpdGUiPgogICAgICA8Zz4KICAgICAgICA8cGF0aCBkPSJNIDggMCBMIDAgLTMgTCAwIDMgWiIgZmlsbD0iY3VycmVudENvbG9yIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgIDwvbWFya2VyPgogIDwvZGVmcz4KICA8bWV0YWRhdGE+IFByb2R1Y2VkIGJ5IE9tbmlHcmFmZmxlIDcuMTguMVxuMjAyMC0xMi0yNyAxODowMjo0OSArMDAwMDwvbWV0YWRhdGE+CiAgPGcgaWQ9IlBsdWdpbl9PcmRlciIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLW9wYWNpdHk9IjEiIHN0cm9rZS1kYXNoYXJyYXk9Im5vbmUiIHN0cm9rZS1vcGFjaXR5PSIxIj4KICAgIDx0aXRsZT5QbHVnaW4gT3JkZXI8L3RpdGxlPgogICAgPGcgaWQ9IlBsdWdpbl9PcmRlcl9MYXllcl8xIj4KICAgICAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogICAgICA8ZyBpZD0iR3JhcGhpY18yIj4KICAgICAgICA8cmVjdCB4PSIxMDQwIiB5PSI0OTUuNTI3OTUiIHdpZHRoPSIyNzUiIGhlaWdodD0iMzYuODkxNzgiIGZpbGw9IiM5OTk1MGEiLz4KICAgICAgICA8cmVjdCB4PSIxMDQwIiB5PSI0OTUuNTI3OTUiIHdpZHRoPSIyNzUiIGhlaWdodD0iMzYuODkxNzgiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfNSI+CiAgICAgICAgPHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTQ1LjE4IDUwNC4yNDE4KSIgZmlsbD0id2hpdGUiPgogICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjcwMCIgZmlsbD0id2hpdGUiIHg9IjAiIHk9IjE2Ij5QbHVnaW4gQTwvdHNwYW4+CiAgICAgICAgPC90ZXh0PgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcmFwaGljXzYiPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwNzIuNSA1MDQuNzQ5ODQpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNDAwIiBmaWxsPSJibGFjayIgeD0iNzEwNTQyN2UtMTkiIHk9IjE1Ij5FbnRlcjwvdHNwYW4+CiAgICAgICAgPC90ZXh0PgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcmFwaGljXzciPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMzguODUzIDUwNC43NDk4NCkiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZpbGw9ImJsYWNrIiB4PSIwIiB5PSIxNSI+TGVhdmU8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iR3JhcGhpY184Ij4KICAgICAgICA8cmVjdCB4PSIxMDU3LjUiIHk9IjM4OSIgd2lkdGg9IjY3LjUiIGhlaWdodD0iNjIiIGZpbGw9IiNjMGMwZmYiLz4KICAgICAgICA8cmVjdCB4PSIxMDU3LjUiIHk9IjM4OSIgd2lkdGg9IjY3LjUiIGhlaWdodD0iNjIiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgICAgPHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA2Mi41IDQxMC43NzYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNDAwIiBmaWxsPSJibGFjayIgeD0iMTIuNTM0IiB5PSIxNSI+QXJnczwvdHNwYW4+CiAgICAgICAgPC90ZXh0PgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJMaW5lXzkiPgogICAgICAgIDxsaW5lIHgxPSIxMDkxLjI3MTgiIHkxPSI0NTEiIHgyPSIxMDkxLjMwMDUiIHkyPSI0OTEuODYzIiBtYXJrZXItZW5kPSJ1cmwoI0ZpbGxlZEFycm93X01hcmtlcikiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTAiPgogICAgICAgIDxyZWN0IHg9IjEwNDAiIHk9IjU1My41NTQxIiB3aWR0aD0iMjc1IiBoZWlnaHQ9IjM2Ljg5MTc4IiBmaWxsPSIjOTk5NTBhIi8+CiAgICAgICAgPHJlY3QgeD0iMTA0MCIgeT0iNTUzLjU1NDEiIHdpZHRoPSIyNzUiIGhlaWdodD0iMzYuODkxNzgiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTEiPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0NS4wMjggNTYyLjI2Nzk0KSIgZmlsbD0id2hpdGUiPgogICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjcwMCIgZmlsbD0id2hpdGUiIHg9IjAiIHk9IjE2Ij5QbHVnaW4gQjwvdHNwYW4+CiAgICAgICAgPC90ZXh0PgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcmFwaGljXzEyIj4KICAgICAgICA8dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDcyLjUgNTYyLjc3NikiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZpbGw9ImJsYWNrIiB4PSI3MTA1NDI3ZS0xOSIgeT0iMTUiPkVudGVyPC90c3Bhbj4KICAgICAgICA8L3RleHQ+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTMiPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMzguODUzIDU2Mi43NzYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNDAwIiBmaWxsPSJibGFjayIgeD0iMCIgeT0iMTUiPkxlYXZlPC90c3Bhbj4KICAgICAgICA8L3RleHQ+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTQiPgogICAgICAgIDxyZWN0IHg9IjEwNDAiIHk9IjYxMS41ODAzIiB3aWR0aD0iMjc1IiBoZWlnaHQ9IjM2Ljg5MTc4IiBmaWxsPSIjOTk5NTBhIi8+CiAgICAgICAgPHJlY3QgeD0iMTA0MCIgeT0iNjExLjU4MDMiIHdpZHRoPSIyNzUiIGhlaWdodD0iMzYuODkxNzgiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTUiPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0NC43MzIgNjIwLjI5NDEpIiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNzAwIiBmaWxsPSJ3aGl0ZSIgeD0iMTkxODQ2NTRlLTIwIiB5PSIxNiI+UGx1Z2luIEM8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iR3JhcGhpY18xNiI+CiAgICAgICAgPHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA3Mi41IDYyMC44MDIxNikiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZpbGw9ImJsYWNrIiB4PSI3MTA1NDI3ZS0xOSIgeT0iMTUiPkVudGVyPC90c3Bhbj4KICAgICAgICA8L3RleHQ+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTciPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMzguODUzIDYyMC44MDIxNikiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZpbGw9ImJsYWNrIiB4PSIwIiB5PSIxNSI+TGVhdmU8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iR3JhcGhpY18xOCI+CiAgICAgICAgPHJlY3QgeD0iMTA0MCIgeT0iODA5LjA1MjMiIHdpZHRoPSIyNzUiIGhlaWdodD0iNDIuOTc0IiBmaWxsPSIjODBmZjgwIi8+CiAgICAgICAgPHJlY3QgeD0iMTA0MCIgeT0iODA5LjA1MjMiIHdpZHRoPSIyNzUiIGhlaWdodD0iNDIuOTc0IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwNDUgODIxLjMxNTMpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNDAwIiBmaWxsPSJibGFjayIgeD0iMTAxLjM4IiB5PSIxNSI+RnVuY3Rpb248L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iTGluZV8xOSI+CiAgICAgICAgPGxpbmUgeDE9IjEwOTEuMTE2NSIgeTE9IjY0Mi4yMzciIHgyPSIxMDkwLjQ0ODgiIHkyPSI2ODMuMTAxMyIgbWFya2VyLWVuZD0idXJsKCNGaWxsZWRBcnJvd19NYXJrZXIpIiBzdHJva2U9IndoaXRlIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJMaW5lXzIwIj4KICAgICAgICA8bGluZSB4MT0iMTI1OS4yMDQyIiB5MT0iNjkzIiB4Mj0iMTI1OS44NDMyIiB5Mj0iNjUyLjEzNTgiIG1hcmtlci1lbmQ9InVybCgjRmlsbGVkQXJyb3dfTWFya2VyKSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iTGluZV8yMSI+CiAgICAgICAgPGxpbmUgeDE9IjEyNjAuMTg5IiB5MT0iNjE3LjgxNTMiIHgyPSIxMjYwLjE4OSIgeTI9IjU5NC4xMTA4NCIgbWFya2VyLWVuZD0idXJsKCNGaWxsZWRBcnJvd19NYXJrZXIpIiBzdHJva2U9IndoaXRlIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJMaW5lXzIyIj4KICAgICAgICA8bGluZSB4MT0iMTI2MC4xODkiIHkxPSI1NTkuNzg5MTYiIHgyPSIxMjYwLjE4OSIgeTI9IjUzNi4wODQ3IiBtYXJrZXItZW5kPSJ1cmwoI0ZpbGxlZEFycm93X01hcmtlcikiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkxpbmVfMjMiPgogICAgICAgIDxsaW5lIHgxPSIxMDkxLjMxNiIgeTE9IjUyNi4xODQ3IiB4Mj0iMTA5MS4zMTYiIHkyPSI1NDkuODg5MTYiIG1hcmtlci1lbmQ9InVybCgjRmlsbGVkQXJyb3dfTWFya2VyKSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iTGluZV8yNCI+CiAgICAgICAgPGxpbmUgeDE9IjEwOTEuMzE2IiB5MT0iNTg0LjIxMDg0IiB4Mj0iMTA5MS4zMTYiIHkyPSI2MDcuOTE1MyIgbWFya2VyLWVuZD0idXJsKCNGaWxsZWRBcnJvd19NYXJrZXIpIiBzdHJva2U9IndoaXRlIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcmFwaGljXzI1Ij4KICAgICAgICA8cmVjdCB4PSIxMjE5LjkzOSIgeT0iMzg5IiB3aWR0aD0iODAuNSIgaGVpZ2h0PSI2MiIgZmlsbD0iI2ZmOWMzMCIvPgogICAgICAgIDxyZWN0IHg9IjEyMTkuOTM5IiB5PSIzODkiIHdpZHRoPSI4MC41IiBoZWlnaHQ9IjYyIiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMjQuOTM5IDQxMC43NzYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNDAwIiBmaWxsPSJibGFjayIgeD0iMTAuNDkiIHk9IjE1Ij5PdXRwdXQ8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iTGluZV8yNiI+CiAgICAgICAgPGxpbmUgeDE9IjEyNjAuMTg5IiB5MT0iNTAxLjc2MyIgeDI9IjEyNjAuMTg5IiB5Mj0iNDYwLjkiIG1hcmtlci1lbmQ9InVybCgjRmlsbGVkQXJyb3dfTWFya2VyKSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iR3JhcGhpY18yNyI+CiAgICAgICAgPHJlY3QgeD0iMTA1Ni4wMzA1IiB5PSI2OTMiIHdpZHRoPSI2Ny41IiBoZWlnaHQ9IjYyIiBmaWxsPSIjYzBjMGZmIi8+CiAgICAgICAgPHJlY3QgeD0iMTA1Ni4wMzA1IiB5PSI2OTMiIHdpZHRoPSI2Ny41IiBoZWlnaHQ9IjYyIiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwNjEuMDMwNSA3MTQuNzc2KSIgZmlsbD0iYmxhY2siPgogICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjQwMCIgZmlsbD0iYmxhY2siIHg9IjEyLjUzNCIgeT0iMTUiPkFyZ3M8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iR3JhcGhpY18yOSI+CiAgICAgICAgPHJlY3QgeD0iMTIxOC40Njk1IiB5PSI2OTMiIHdpZHRoPSI4MC41IiBoZWlnaHQ9IjYyIiBmaWxsPSIjZmY5YzMwIi8+CiAgICAgICAgPHJlY3QgeD0iMTIxOC40Njk1IiB5PSI2OTMiIHdpZHRoPSI4MC41IiBoZWlnaHQ9IjYyIiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMjMuNDY5NSA3MTQuNzc2KSIgZmlsbD0iYmxhY2siPgogICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjQwMCIgZmlsbD0iYmxhY2siIHg9IjEwLjQ5IiB5PSIxNSI+T3V0cHV0PC90c3Bhbj4KICAgICAgICA8L3RleHQ+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkxpbmVfMzEiPgogICAgICAgIDxsaW5lIHgxPSIxMTE1LjMwNDUiIHkxPSI3NTUiIHgyPSIxMTUzLjUxNTkiIHkyPSI4MDEuNDA5NTUiIG1hcmtlci1lbmQ9InVybCgjRmlsbGVkQXJyb3dfTWFya2VyKSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iTGluZV8zMiI+CiAgICAgICAgPGxpbmUgeDE9IjExOTMuODgwNSIgeTE9IjgwOS4wNTIzIiB4Mj0iMTIyOS4wODQ4IiB5Mj0iNzYyLjg3MzEiIG1hcmtlci1lbmQ9InVybCgjRmlsbGVkQXJyb3dfTWFya2VyKSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgPC9nPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg=="></p></div><p>Here is the same description as code:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">; register in a single call</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.plugin/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [plugin-a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   plugin-b</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   plugin-c])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; in many calls, same result:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-&gt; {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (p.plugin/register plugin-a)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (p.plugin/register plugin-b)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (p.plugin/register plugin-c))</span></div></div></div></div></div><p>Plugins on top will enter first and leave last.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>You can view the plugin order in the attribute <code>::p.plugin/plugin-order</code> attribute in
your environment.</p></div></div><p>A plugin can halt the execution of the posterior plugins (and the original operation
itself). This happens when the plugin returns some data without calling the original
function given on the wrapper.</p><p>For example, if <code>plugin-b</code> halts execution (like our protected attributes plugin does)
the stack stops there and goes back up. The following image illustrates this case:</p><div class="pathom-diagram"><p>  <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZlcnNpb249IjEuMSIgeG1sbnM6eGw9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9Ijk0NCAzODggMzcyIDQ2NSIgd2lkdGg9IjM3MiIgaGVpZ2h0PSI0NjUiPgogIDxkZWZzPgogICAgPGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIHBhbm9zZS0xPSIyIDAgOCAzIDAgMCAwIDkgMCA0IiB1bml0cy1wZXItZW09IjEwMDAiIHVuZGVybGluZS1wb3NpdGlvbj0iLTEwMCIgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNTAiIHNsb3BlPSIwIiB4LWhlaWdodD0iNTE3IiBjYXAtaGVpZ2h0PSI3MTQiIGFzY2VudD0iOTc1LjAwNjEiIGRlc2NlbnQ9Ii0yMTYuOTk1MjQiIGZvbnQtd2VpZ2h0PSI3MDAiPgogICAgICA8Zm9udC1mYWNlLXNyYz4KICAgICAgICA8Zm9udC1mYWNlLW5hbWUgbmFtZT0iSGVsdmV0aWNhTmV1ZS1Cb2xkIi8+CiAgICAgIDwvZm9udC1mYWNlLXNyYz4KICAgIDwvZm9udC1mYWNlPgogICAgPGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIHBhbm9zZS0xPSIyIDAgNSAzIDAgMCAwIDIgMCA0IiB1bml0cy1wZXItZW09IjEwMDAiIHVuZGVybGluZS1wb3NpdGlvbj0iLTEwMCIgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNTAiIHNsb3BlPSIwIiB4LWhlaWdodD0iNTE3IiBjYXAtaGVpZ2h0PSI3MTQiIGFzY2VudD0iOTUxLjk5NTgiIGRlc2NlbnQ9Ii0yMTIuOTk3NDQiIGZvbnQtd2VpZ2h0PSI0MDAiPgogICAgICA8Zm9udC1mYWNlLXNyYz4KICAgICAgICA8Zm9udC1mYWNlLW5hbWUgbmFtZT0iSGVsdmV0aWNhTmV1ZSIvPgogICAgICA8L2ZvbnQtZmFjZS1zcmM+CiAgICA8L2ZvbnQtZmFjZT4KICAgIDxtYXJrZXIgb3JpZW50PSJhdXRvIiBvdmVyZmxvdz0idmlzaWJsZSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBpZD0iRmlsbGVkQXJyb3dfTWFya2VyIiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHZpZXdCb3g9Ii0xIC00IDEwIDgiIG1hcmtlcldpZHRoPSIxMCIgbWFya2VySGVpZ2h0PSI4IiBjb2xvcj0id2hpdGUiPgogICAgICA8Zz4KICAgICAgICA8cGF0aCBkPSJNIDggMCBMIDAgLTMgTCAwIDMgWiIgZmlsbD0iY3VycmVudENvbG9yIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgIDwvbWFya2VyPgogIDwvZGVmcz4KICA8bWV0YWRhdGE+IFByb2R1Y2VkIGJ5IE9tbmlHcmFmZmxlIDcuMTguMVxuMjAyMC0xMi0yOCAwMDo1NDoyMCArMDAwMDwvbWV0YWRhdGE+CiAgPGcgaWQ9IlBsdWdpbl9PcmRlcl8xIiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtb3BhY2l0eT0iMSIgc3Ryb2tlLWRhc2hhcnJheT0ibm9uZSIgc3Ryb2tlLW9wYWNpdHk9IjEiPgogICAgPHRpdGxlPlBsdWdpbiBPcmRlciAxPC90aXRsZT4KICAgIDxnIGlkPSJQbHVnaW5fT3JkZXJfMV9MYXllcl8xIj4KICAgICAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogICAgICA8ZyBpZD0iR3JhcGhpY18yIj4KICAgICAgICA8cmVjdCB4PSIxMDQwIiB5PSI0OTUuNTI3OTUiIHdpZHRoPSIyNzUiIGhlaWdodD0iMzYuODkxNzgiIGZpbGw9IiM5OTk1MGEiLz4KICAgICAgICA8cmVjdCB4PSIxMDQwIiB5PSI0OTUuNTI3OTUiIHdpZHRoPSIyNzUiIGhlaWdodD0iMzYuODkxNzgiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfNSI+CiAgICAgICAgPHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTQ1LjE4IDUwNC4yNDE4KSIgZmlsbD0id2hpdGUiPgogICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjcwMCIgZmlsbD0id2hpdGUiIHg9IjAiIHk9IjE2Ij5QbHVnaW4gQTwvdHNwYW4+CiAgICAgICAgPC90ZXh0PgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcmFwaGljXzYiPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwNzIuNSA1MDQuNzQ5ODQpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNDAwIiBmaWxsPSJibGFjayIgeD0iNzEwNTQyN2UtMTkiIHk9IjE1Ij5FbnRlcjwvdHNwYW4+CiAgICAgICAgPC90ZXh0PgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcmFwaGljXzciPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMzguODUzIDUwNC43NDk4NCkiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZpbGw9ImJsYWNrIiB4PSIwIiB5PSIxNSI+TGVhdmU8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iR3JhcGhpY184Ij4KICAgICAgICA8cmVjdCB4PSIxMDU3LjUiIHk9IjM4OSIgd2lkdGg9IjY3LjUiIGhlaWdodD0iNjIiIGZpbGw9IiNjMGMwZmYiLz4KICAgICAgICA8cmVjdCB4PSIxMDU3LjUiIHk9IjM4OSIgd2lkdGg9IjY3LjUiIGhlaWdodD0iNjIiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgICAgPHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA2Mi41IDQxMC43NzYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNDAwIiBmaWxsPSJibGFjayIgeD0iMTIuNTM0IiB5PSIxNSI+QXJnczwvdHNwYW4+CiAgICAgICAgPC90ZXh0PgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJMaW5lXzkiPgogICAgICAgIDxsaW5lIHgxPSIxMDkxLjI3MTgiIHkxPSI0NTEiIHgyPSIxMDkxLjMwMDUiIHkyPSI0OTEuODYzIiBtYXJrZXItZW5kPSJ1cmwoI0ZpbGxlZEFycm93X01hcmtlcikiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTAiPgogICAgICAgIDxyZWN0IHg9IjEwNDAiIHk9IjU1My41NTQxIiB3aWR0aD0iMjc1IiBoZWlnaHQ9IjM2Ljg5MTc4IiBmaWxsPSIjOTk5NTBhIi8+CiAgICAgICAgPHJlY3QgeD0iMTA0MCIgeT0iNTUzLjU1NDEiIHdpZHRoPSIyNzUiIGhlaWdodD0iMzYuODkxNzgiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTEiPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0NS4wMjggNTYyLjI2Nzk0KSIgZmlsbD0id2hpdGUiPgogICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjcwMCIgZmlsbD0id2hpdGUiIHg9IjAiIHk9IjE2Ij5QbHVnaW4gQjwvdHNwYW4+CiAgICAgICAgPC90ZXh0PgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcmFwaGljXzEyIj4KICAgICAgICA8dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDcyLjUgNTYyLjc3NikiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZpbGw9ImJsYWNrIiB4PSI3MTA1NDI3ZS0xOSIgeT0iMTUiPkVudGVyPC90c3Bhbj4KICAgICAgICA8L3RleHQ+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTMiPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMzguODUzIDU2Mi43NzYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNDAwIiBmaWxsPSJibGFjayIgeD0iMCIgeT0iMTUiPkxlYXZlPC90c3Bhbj4KICAgICAgICA8L3RleHQ+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTQiPgogICAgICAgIDxyZWN0IHg9IjEwNDAiIHk9IjYxMS41ODAzIiB3aWR0aD0iMjc1IiBoZWlnaHQ9IjM2Ljg5MTc4IiBmaWxsPSIjOTk5Ii8+CiAgICAgICAgPHJlY3QgeD0iMTA0MCIgeT0iNjExLjU4MDMiIHdpZHRoPSIyNzUiIGhlaWdodD0iMzYuODkxNzgiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTUiPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0NC43MzIgNjIwLjI5NDEpIiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNzAwIiBmaWxsPSJ3aGl0ZSIgeD0iMTkxODQ2NTRlLTIwIiB5PSIxNiI+UGx1Z2luIEM8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iR3JhcGhpY18xNiI+CiAgICAgICAgPHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA3Mi41IDYyMC44MDIxNikiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZpbGw9ImJsYWNrIiB4PSI3MTA1NDI3ZS0xOSIgeT0iMTUiPkVudGVyPC90c3Bhbj4KICAgICAgICA8L3RleHQ+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMTciPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMzguODUzIDYyMC44MDIxNikiIGZpbGw9ImJsYWNrIj4KICAgICAgICAgIDx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI0MDAiIGZpbGw9ImJsYWNrIiB4PSIwIiB5PSIxNSI+TGVhdmU8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iR3JhcGhpY18xOCI+CiAgICAgICAgPHJlY3QgeD0iMTA0MCIgeT0iODA5LjA1MjMiIHdpZHRoPSIyNzUiIGhlaWdodD0iNDIuOTc0IiBmaWxsPSIjOTk5Ii8+CiAgICAgICAgPHJlY3QgeD0iMTA0MCIgeT0iODA5LjA1MjMiIHdpZHRoPSIyNzUiIGhlaWdodD0iNDIuOTc0IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwNDUgODIxLjMxNTMpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNDAwIiBmaWxsPSJibGFjayIgeD0iMTAxLjM4IiB5PSIxNSI+RnVuY3Rpb248L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iTGluZV8yMiI+CiAgICAgICAgPGxpbmUgeDE9IjEyNjAuMTg5IiB5MT0iNTU5Ljc4OTE2IiB4Mj0iMTI2MC4xODkiIHkyPSI1MzYuMDg0NyIgbWFya2VyLWVuZD0idXJsKCNGaWxsZWRBcnJvd19NYXJrZXIpIiBzdHJva2U9IndoaXRlIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJMaW5lXzIzIj4KICAgICAgICA8bGluZSB4MT0iMTA5MS4zMTYiIHkxPSI1MjYuMTg0NyIgeDI9IjEwOTEuMzE2IiB5Mj0iNTQ5Ljg4OTE2IiBtYXJrZXItZW5kPSJ1cmwoI0ZpbGxlZEFycm93X01hcmtlcikiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkxpbmVfMjQiPgogICAgICAgIDxsaW5lIHgxPSIxMTE1LjEzMiIgeTE9IjU3MiIgeDI9IjEyMzAuMjgyMyIgeTI9IjU3MiIgbWFya2VyLWVuZD0idXJsKCNGaWxsZWRBcnJvd19NYXJrZXIpIiBzdHJva2U9IndoaXRlIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICA8L2c+CiAgICAgIDxnIGlkPSJHcmFwaGljXzI1Ij4KICAgICAgICA8cmVjdCB4PSIxMjE5LjkzOSIgeT0iMzg5IiB3aWR0aD0iODAuNSIgaGVpZ2h0PSI2MiIgZmlsbD0iI2ZmOWMzMCIvPgogICAgICAgIDxyZWN0IHg9IjEyMTkuOTM5IiB5PSIzODkiIHdpZHRoPSI4MC41IiBoZWlnaHQ9IjYyIiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMjQuOTM5IDQxMC43NzYpIiBmaWxsPSJibGFjayI+CiAgICAgICAgICA8dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNDAwIiBmaWxsPSJibGFjayIgeD0iMTAuNDkiIHk9IjE1Ij5PdXRwdXQ8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iTGluZV8yNiI+CiAgICAgICAgPGxpbmUgeDE9IjEyNjAuMTg5IiB5MT0iNTAxLjc2MyIgeDI9IjEyNjAuMTg5IiB5Mj0iNDYwLjkiIG1hcmtlci1lbmQ9InVybCgjRmlsbGVkQXJyb3dfTWFya2VyKSIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iR3JhcGhpY18yNyI+CiAgICAgICAgPHJlY3QgeD0iMTA1Ni4wMzA1IiB5PSI2OTMiIHdpZHRoPSI2Ny41IiBoZWlnaHQ9IjYyIiBmaWxsPSIjOTk5Ii8+CiAgICAgICAgPHJlY3QgeD0iMTA1Ni4wMzA1IiB5PSI2OTMiIHdpZHRoPSI2Ny41IiBoZWlnaHQ9IjYyIiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwNjEuMDMwNSA3MTQuNzc2KSIgZmlsbD0iYmxhY2siPgogICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjQwMCIgZmlsbD0iYmxhY2siIHg9IjEyLjUzNCIgeT0iMTUiPkFyZ3M8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgICA8ZyBpZD0iR3JhcGhpY18yOSI+CiAgICAgICAgPHJlY3QgeD0iMTIxOC40Njk1IiB5PSI2OTMiIHdpZHRoPSI4MC41IiBoZWlnaHQ9IjYyIiBmaWxsPSIjOTk5Ii8+CiAgICAgICAgPHJlY3QgeD0iMTIxOC40Njk1IiB5PSI2OTMiIHdpZHRoPSI4MC41IiBoZWlnaHQ9IjYyIiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMjMuNDY5NSA3MTQuNzc2KSIgZmlsbD0iYmxhY2siPgogICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjQwMCIgZmlsbD0iYmxhY2siIHg9IjEwLjQ5IiB5PSIxNSI+T3V0cHV0PC90c3Bhbj4KICAgICAgICA8L3RleHQ+CiAgICAgIDwvZz4KICAgICAgPGcgaWQ9IkdyYXBoaWNfMzMiPgogICAgICAgIDxyZWN0IHg9IjExNDYuMzAxMiIgeT0iNTU3Ljc3NiIgd2lkdGg9IjQ0LjA4IiBoZWlnaHQ9IjI4LjQ0Nzk5OCIgZmlsbD0iIzVmNWMwNyIvPgogICAgICAgIDx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDExNTEuMzAxMiA1NjIuNzc2KSIgZmlsbD0id2hpdGUiPgogICAgICAgICAgPHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjQwMCIgZmlsbD0id2hpdGUiIHg9Ijg3Mzk2NzZlLTE5IiB5PSIxNSI+aGFsdHM8L3RzcGFuPgogICAgICAgIDwvdGV4dD4KICAgICAgPC9nPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg=="></p></div><p>Consider this when deciding the order of plugins.</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>When you use <code>p.plugin/register</code>, Pathom creates specific lists for each plugin type. This way, it only has to iterate over plugins of that extension type.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="extension-points"></a>Extension points<a aria-hidden="true" tabindex="-1" class="hash-link" href="#extension-points" title="Direct link to heading">#</a></h2><p>Here you can see all the extension points available in Pathom.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="runner-extensions"></a>Runner Extensions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#runner-extensions" title="Direct link to heading">#</a></h3><p>Extensions available for the runner process of Pathom at <code>com.wsscode.pathom3.connect.runner</code>
namespace.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pcrwrap-resolve"></a><code>::pcr/wrap-resolve</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pcrwrap-resolve" title="Direct link to heading">#</a></h4><p>Wrap the call of a resolver. Note in the case of a batch resolver, input is going to be
a sequence.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-resolve-wrapper [resolve]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env input]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (resolve env input)))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pcrwrap-mutate"></a><code>::pcr/wrap-mutate</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pcrwrap-mutate" title="Direct link to heading">#</a></h4><p>Wrap the call of a mutation.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-mutate-wrapper [mutate]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env ast]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (mutate env ast)))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="perrorwrap-attribute-error"></a><code>::p.error/wrap-attribute-error</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#perrorwrap-attribute-error" title="Direct link to heading">#</a></h4><p>Wrap the error data, allowing you to modify it.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-attribute-error-wrapper [attr-error]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [entity k]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (let [err (attr-error entity k)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ; will return just the error cause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (:com.wsscode.pathom3.error/cause err))))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pcrwrap-resolver-error"></a><code>::pcr/wrap-resolver-error</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pcrwrap-resolver-error" title="Direct link to heading">#</a></h4><p>Wrap the operation that attaches an error to a node.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-resolver-error-wrapper [resolver-error]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env ast error]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (let [e (resolver-error env ast error)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ; you may modify the error here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      e)))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pcrwrap-batch-resolver-error"></a><code>::pcr/wrap-batch-resolver-error</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pcrwrap-batch-resolver-error" title="Direct link to heading">#</a></h4><p>Wrap batch errors</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-batch-resolver-error-wrapper [_]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env [batch-op batch-items] e]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ; report error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pcrwrap-mutation-error"></a><code>::pcr/wrap-mutation-error</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pcrwrap-mutation-error" title="Direct link to heading">#</a></h4><p>Use this to get notified when mutation errors happen.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-mutation-error-wrapper [mutation-error]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env ast error]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (let [e (mutation-error env ast error)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ; you may modify the error here</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      e)))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pcrwrap-merge-attribute"></a><code>::pcr/wrap-merge-attribute</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pcrwrap-merge-attribute" title="Direct link to heading">#</a></h4><p>Wrap the operation of merging new data in the entity. This is an important point. You
can control how sub-processes occur here. The source original is an <code>assoc</code> like operation.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-merge-attribute-wrapper [original]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env out k v]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (original env out k v)))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pcrwrap-entity-ready"></a><code>::pcr/wrap-entity-ready!</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pcrwrap-entity-ready" title="Direct link to heading">#</a></h4><p>This runs only once per entity, if you want to do any kind of post-process that you
expect one entity to be ready.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-run-graph-wrapper [original]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (original env)))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pcrwrap-run-graph"></a><code>::pcr/wrap-run-graph!</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pcrwrap-run-graph" title="Direct link to heading">#</a></h4><p>Wrap the operation of running a graph. Note for a given transaction, there may be many
graphs to run. Each entity (each map in the result) is potentially an entity and may
have its own graph.</p><p>Also note this may run multiple times for the same entity, for each &quot;batch hit&quot; it
does.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-run-graph-wrapper [original]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env ast-or-graph entity-tree*]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (original env ast-or-graph entity-tree*)))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pcrwrap-root-run-graph"></a><code>::pcr/wrap-root-run-graph!</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pcrwrap-root-run-graph" title="Direct link to heading">#</a></h4><p>Like the previous, but only runs at the root graph.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="eql-output"></a>EQL Output<a aria-hidden="true" tabindex="-1" class="hash-link" href="#eql-output" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pfeqlwrap-map-select-entry"></a><code>::pf.eql/wrap-map-select-entry</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pfeqlwrap-map-select-entry" title="Direct link to heading">#</a></h4><p>This is the one we used for the initial demo. Controls how outputs get masked out in
the post-processing of the EQL output.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-map-select-entry-wrapper [original]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env source ast]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (original env source ast)))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="peqlwrap-process-ast"></a><code>::p.eql/wrap-process-ast</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#peqlwrap-process-ast" title="Direct link to heading">#</a></h4><p>This wraps a call to <code>process-ast</code> in the EQL interface.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(defn sample-process-ast-wrapper [process]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (fn [env ast]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (process env ast)))</span></div></div></div></div></div><p>When the query is triggered using <code>process</code>, you also get the query as <code>::pcr/root-query</code>
in the environment.</p><p>If you don&#x27;t see this value it means <code>process-ast</code> was called directly. To get the query
in this case use <code>eql/ast-&gt;query</code> to generate the query from the AST.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/wilkerlucio/pathom3-docs/edit/master/docs/plugins.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/error-handling"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Error Handling</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/built-in-plugins"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Built-in Plugins Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-wrapping-model-of-plugins" class="table-of-contents__link">The wrapping model of plugins</a><ul><li><a href="#define-the-wrapper-fn" class="table-of-contents__link">Define the wrapper fn</a></li><li><a href="#define-the-plugin" class="table-of-contents__link">Define the plugin</a></li></ul></li><li><a href="#adding-plugins" class="table-of-contents__link">Adding plugins</a><ul><li><a href="#plugin-order" class="table-of-contents__link">Plugin order</a></li></ul></li><li><a href="#extension-points" class="table-of-contents__link">Extension points</a><ul><li><a href="#runner-extensions" class="table-of-contents__link">Runner Extensions</a></li><li><a href="#eql-output" class="table-of-contents__link">EQL Output</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Presentations</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.youtube.com/watch?v=YaHiff2vZ_o" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Navigation with Pathom 3</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=IS3i3DTUnAI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2019 - The Maximal Graph</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=yyVKf2U8YVg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2018 - Scaling Full Stack Applications</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=r3zywlNflJI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dutch Clojure Days 2018 - Clojure Graph APIâ€™s</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://clojurians.slack.com/messages/pathom/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2023 Wilker Lucio</div></div></div></footer></div>
<script src="/styles.40439ba3.js"></script>
<script src="/runtime~main.e6e97b8a.js"></script>
<script src="/main.4a27a30b.js"></script>
<script src="/1.33e73229.js"></script>
<script src="/2.ccb31818.js"></script>
<script src="/4.a2050c74.js"></script>
<script src="/1be78505.d9c494fe.js"></script>
<script src="/48.f6e5660d.js"></script>
<script src="/935f2afb.0ba01e53.js"></script>
<script src="/17896441.3a0d6633.js"></script>
<script src="/2a8c400d.cb4c48b6.js"></script>
</body>
</html>