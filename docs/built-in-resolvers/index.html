<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GZFCYV0DXN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GZFCYV0DXN",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Pathom 3" href="/opensearch.xml"><title data-react-helmet="true">Built-in Resolvers | Pathom 3</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Built-in Resolvers | Pathom 3"><meta data-react-helmet="true" name="description" content="Pathom comes with built-in resolvers to handle common situations. You will find these"><meta data-react-helmet="true" property="og:description" content="Pathom comes with built-in resolvers to handle common situations. You will find these"><meta data-react-helmet="true" property="og:url" content="https://pathom3.wsscode.com/docs/built-in-resolvers"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://pathom3.wsscode.com/docs/built-in-resolvers"><link rel="stylesheet" href="/styles.4444d5c6.css">
<link rel="preload" href="/styles.488f8ab7.js" as="script">
<link rel="preload" href="/runtime~main.868e945b.js" as="script">
<link rel="preload" href="/main.25d8d50a.js" as="script">
<link rel="preload" href="/1.89ba2929.js" as="script">
<link rel="preload" href="/2.ab7b01d4.js" as="script">
<link rel="preload" href="/3.28552344.js" as="script">
<link rel="preload" href="/1be78505.fdabaee1.js" as="script">
<link rel="preload" href="/46.50848efd.js" as="script">
<link rel="preload" href="/935f2afb.b0430d98.js" as="script">
<link rel="preload" href="/17896441.da245a3d.js" as="script">
<link rel="preload" href="/fa4f0c38.49c03c0b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon_64x64.png" alt="Pathom 3"><strong class="navbar__title">Pathom 3</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a class="navbar__item navbar__link" href="/media">Media</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon_64x64.png" alt="Pathom 3"><strong class="navbar__title">Pathom 3</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/media">Media</a></li><li class="menu__list-item"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial">Pathom Tutorial</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Using Pathom</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resolvers">Resolvers</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/built-in-resolvers">Built-in Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/smart-maps">Smart Maps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eql">EQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/environment">Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cache">Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/placeholders">Placeholders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/mutations">Mutations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/error-handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugins">Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-plugins">Built-in Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/async">Async</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/debugging">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/foreign">Foreign Environments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dynamic-resolvers">Dynamic Resolvers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How Pathom Works</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/indexes">Indexes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/planner">Planner</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/shape-descriptor">Shape Descriptor</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Integrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/integrations/graphql">GraphQL</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/hacker-news-scraper">Hacker News Scraper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/serverless-pathom-gcf">Serverless Pathom with GCF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/babashka">Scripting with Babashka</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/graphql-integration">GraphQL Integration</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Built-in Resolvers</h1></header><div class="markdown"><p>Pathom comes with built-in resolvers to handle common situations. You will find these
resolver generators at:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[com.wsscode.pathom3.connect.built-in.resolvers :as pbir]</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="constants"></a>Constants<a aria-hidden="true" tabindex="-1" class="hash-link" href="#constants" title="Direct link to heading">#</a></h2><p>This is a simple way to express a constant value for a given attribute.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pbir/constantly-resolver :math/PI 3.1415)</span></div></div></div></div></div><p>If instead of a constant value you want a function to generate the value, you can use
the <code>constantly-fn-resolver</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pbir/constantly-fn-resolver ::throw-error (fn [_] (throw (ex-info &quot;Error&quot; {}))))</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="aliasing"></a>Aliasing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#aliasing" title="Direct link to heading">#</a></h2><p>You can use an alias to create a resolver that provides one attribute based on the same
value as another:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pbir/alias-resolver :specific.impl.product/id :generic.ui.product/id)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; is equivalent to:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pco/defresolver spec-&gt;generic-prod-id [{:specific.impl.product/keys [id]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:generic.ui.product/id id})</span></div></div></div></div></div><p>Like the example suggests, you can use an alias to make some specific name and make it align
generically with some other domain name.</p><p>Note that this only goes in one direction, to illustrate this, consider the extended
example here:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def indexes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [specific-impl-registry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     another-impl-option</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     (pbir/alias-resolver :specific.impl.product/id :generic.ui.product/id)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     (pbir/alias-resolver :another.impl.product/id :generic.ui.product/id)]))</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>A practical side of using this helper is that the helper will generate a name for the
resolver for you, this alleviates the chore of repetitive writing and makes the alias
names look like each other. Try checking the resolver name for the alias resolvers
from the previous example.</p></div></div><p>In this case, both <code>:specific.impl.product/id</code> and <code>:another.impl.product/id</code> are valid
value to show for <code>:generic.ui.product/id</code>; but if you have only the <code>:generic.ui.product/id</code>,
you can&#x27;t know if its from <code>specific</code> or <code>another</code> impl.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="equivalence"></a>Equivalence<a aria-hidden="true" tabindex="-1" class="hash-link" href="#equivalence" title="Direct link to heading">#</a></h2><p>Use this to express that two attributes are equivalent, that they share the same semantics.
For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pbir/equivalence-resolver :acme.product/upc :affiliate.product/upc)</span></div></div></div></div></div><p>This is a common tool to integrate attributes from different domains.</p><p>In practice, it creates one alias resolver for each direction, any resolver that uses
the first will also work with the second, and vice versa.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="simple-one-to-one-transformation"></a>Simple one-to-one transformation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#simple-one-to-one-transformation" title="Direct link to heading">#</a></h2><p>This helper gives an easy way to convert one attribute into another, modified by a
function. A common use case is to convert some attribute from one unit to another unit
under a different name. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">; in this example we create one different transformation for each direction</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def registry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [(pbir/single-attr-resolver :acme.track/duration-ms :affiliate.track/duration-seconds #(/ % 1000))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   (pbir/single-attr-resolver :affiliate.track/duration-seconds :acme.track/duration-ms #(* % 1000))])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def indexes (pci/register registry))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-&gt; (psm/smart-map indexes {:acme.track/duration-ms 324000})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    :affiliate.track/duration-seconds)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; 324</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-&gt; (psm/smart-map indexes {:affiliate.track/duration-seconds 324})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    :acme.track/duration-ms)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; 324000</span></div></div></div></div></div><p>The function receives a single argument, which is the value of the <code>source</code> attribute;
and returns the value for <code>target</code> attribute.</p><p>If your transformation also requires access to <code>env</code>, use <code>single-attr-with-env-resolver</code>
instead, then the arglist of <code>f</code> is <code>[env input-attribute-value]</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="static-tables"></a>Static Tables<a aria-hidden="true" tabindex="-1" class="hash-link" href="#static-tables" title="Direct link to heading">#</a></h2><p>You can use static tables to provide extra data for some entities, given some identifier.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def registry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [(pbir/static-table-resolver :song/id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     {1 {:song/name &quot;Marchinha Psicotica de Dr. Soup&quot;}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      2 {:song/name &quot;There&#x27;s Enough&quot;}})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   ; you can provide a name for the resolver, prefer fully qualified symbols</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   (pbir/static-table-resolver `song-analysis :song/id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     {1 {:song/duration 280 :song/tempo 98}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      2 {:song/duration 150 :song/tempo 130}})])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(let [sm (psm/smart-map (pci/register registry)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           {:song/id 1})]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (select-keys sm [:song/id :song/name :song/duration]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; #:song{:id 1, :name &quot;Marchinha Psicotica de Dr. Soup&quot;, :duration 280}</span></div></div></div></div></div><p>This helper infers the output from the table data.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="static-attribute-map"></a>Static Attribute Map<a aria-hidden="true" tabindex="-1" class="hash-link" href="#static-attribute-map" title="Direct link to heading">#</a></h2><p>This one is similar to static tables, but to provide a single attribute for each entity
instead of many:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def registry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [; simple attribute table</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   (pbir/static-attribute-map-resolver :song/id :song/name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     {1 &quot;Marchinha Psicotica de Dr. Soup&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      2 &quot;There&#x27;s Enough&quot;})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   (pbir/static-table-resolver `song-analysis :song/id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     {1 {:song/duration 280 :song/tempo 98}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      2 {:song/duration 150 :song/tempo 130}})])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(let [sm (psm/smart-map (pci/register registry)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           {:song/id 1})]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (select-keys sm [:song/id :song/name :song/duration]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; #:song{:id 1, :name &quot;Marchinha Psicotica de Dr. Soup&quot;, :duration 280}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="attribute-tables"></a>Attribute Tables<a aria-hidden="true" tabindex="-1" class="hash-link" href="#attribute-tables" title="Direct link to heading">#</a></h2><p>This is also similar to static tables, but the table data comes from another attribute instead
of static data.</p><p>Because in this case, the data is opaque, you need to express which keys will trigger
this table attribute lookup. This example is similar to the one from static tables, but
we will mix one static table with one attribute table this time.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def registry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [(pbir/static-table-resolver `song-names :song/id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     {1 {:song/name &quot;Marchinha Psicotica de Dr. Soup&quot;}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      2 {:song/name &quot;There&#x27;s Enough&quot;}})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   ; provide table in the attribute ::song-analysis</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   (pbir/constantly-resolver ::song-analysis</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     {1 {:song/duration 280 :song/tempo 98}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      2 {:song/duration 150 :song/tempo 130}})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   ; ref the attribute, the index attribute and the output that triggers this resolver</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   (pbir/attribute-table-resolver ::song-analysis :song/id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     [:song/duration :song/tempo])])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(let [sm (psm/smart-map (pci/register registry)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           {:song/id 2})]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (select-keys sm [:song/id :song/name :song/duration]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; #:song{:id 2, :name &quot;There&#x27;s Enough&quot;, :duration 150}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="environment-tables"></a>Environment Tables<a aria-hidden="true" tabindex="-1" class="hash-link" href="#environment-tables" title="Direct link to heading">#</a></h2><p>Environment tables are like attribute tables, but instead of looking for the table as
an input, it looks for the table in the environment map.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def registry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [(pbir/static-table-resolver `song-names :song/id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     {1 {:song/name &quot;Marchinha Psicotica de Dr. Soup&quot;}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      2 {:song/name &quot;There&#x27;s Enough&quot;}})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   (pbir/env-table-resolver ::song-analysis :song/id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     [:song/duration :song/tempo])])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def song-details-table</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {1 {:song/duration 280 :song/tempo 98}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   2 {:song/duration 150 :song/tempo 130}})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(let [sm (psm/smart-map (assoc (pci/register registry)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          ; add song-details-table to environment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          ::song-analysis song-details-table)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           {:song/id 2})]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (select-keys sm [:song/id :song/name :song/duration]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; #:song{:id 2, :name &quot;There&#x27;s Enough&quot;, :duration 150}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="edn-files"></a>EDN Files<a aria-hidden="true" tabindex="-1" class="hash-link" href="#edn-files" title="Direct link to heading">#</a></h2><p>Load attributes from an EDN file.</p><p>This is macro made to load some configuration from EDN at compilation time. It&#x27;s an
easy way to source some data from a file.</p><p>Basic example, given this configuration file:</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">my-config.edn</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{:my.system.server/port</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 1234</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :my.system.resources/path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;resources/public&quot;}</span></div></div></div></div></div><p>Loading with <code>edn-file-resolver</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">; app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pco/defresolver full-url [{:keys [my.system.server/port my.system.resource/path]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {::server-url (str &quot;http://localhost:&quot; port &quot;/&quot; path)})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def registry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [(edn-file-resolver &quot;my-config.edn&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   full-url])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-&gt; (psm/smart-map (pci/register registry))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::server-url)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; &quot;http://localhost:1234/resources/public</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="static-tables-on-edn-files"></a>Static tables on EDN Files<a aria-hidden="true" tabindex="-1" class="hash-link" href="#static-tables-on-edn-files" title="Direct link to heading">#</a></h3><p>You can also provide static tables as part of the EDN configuration. To do so, you
add the <code>:com.wsscode.pathom3/entity-table</code> key to the map meta, the value here defines
which is the key to index the table data.</p><div class="mdxCodeBlock_1XEh"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_3nn1">my-config-with-table.edn</div><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd undefined">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC codeBlockWithTitle_3QsD"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{:my.system.server/port</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 1234</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :my.system.resources/path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> &quot;resources/public&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :my.system/generic-db</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ^{:com.wsscode.pathom3/entity-table :my.system/user-id}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> {4 {:my.system.user/name &quot;Anne&quot;}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  2 {:my.system.user/name &quot;Fred&quot;}}}</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">; app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def registry (edn-file-resolver &quot;my-config.edn&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(let [sm (psm/smart-map (pci/register registry) {:my.system/user-id 4})]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (select-keys sm [:my.system/port :my.system.user/name]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; {:my.system/port 1234, :my.system.user/name &quot;Anne&quot;}</span></div></div></div></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Because this helper is a macro, it works on Clojurescript as well, but remember that
it will pull the data from the EDN file at compilation time, not at runtime.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="global-data"></a>Global Data<a aria-hidden="true" tabindex="-1" class="hash-link" href="#global-data" title="Direct link to heading">#</a></h2><p>Global data is the same operation that EDN Files do, but using the data directly:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">; app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pco/defresolver full-url [{:keys [my.system.server/port my.system.resource/path]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {::server-url (str &quot;http://localhost:&quot; port &quot;/&quot; path)})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def registry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [(global-data-resolver {:my.system.server/port</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          1234</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          :my.system.resources/path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          &quot;resources/public&quot;})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   full-url])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(-&gt; (psm/smart-map (pci/register registry))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ::server-url)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; &quot;http://localhost:1234/resources/public</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/wilkerlucio/pathom3-docs/edit/master/docs/built-in-resolvers.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/resolvers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Resolvers</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/smart-maps"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Smart Maps Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#constants" class="table-of-contents__link">Constants</a></li><li><a href="#aliasing" class="table-of-contents__link">Aliasing</a></li><li><a href="#equivalence" class="table-of-contents__link">Equivalence</a></li><li><a href="#simple-one-to-one-transformation" class="table-of-contents__link">Simple one-to-one transformation</a></li><li><a href="#static-tables" class="table-of-contents__link">Static Tables</a></li><li><a href="#static-attribute-map" class="table-of-contents__link">Static Attribute Map</a></li><li><a href="#attribute-tables" class="table-of-contents__link">Attribute Tables</a></li><li><a href="#environment-tables" class="table-of-contents__link">Environment Tables</a></li><li><a href="#edn-files" class="table-of-contents__link">EDN Files</a><ul><li><a href="#static-tables-on-edn-files" class="table-of-contents__link">Static tables on EDN Files</a></li></ul></li><li><a href="#global-data" class="table-of-contents__link">Global Data</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Presentations</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.youtube.com/watch?v=YaHiff2vZ_o" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Navigation with Pathom 3</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=IS3i3DTUnAI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2019 - The Maximal Graph</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=yyVKf2U8YVg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2018 - Scaling Full Stack Applications</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=r3zywlNflJI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dutch Clojure Days 2018 - Clojure Graph APIâ€™s</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://clojurians.slack.com/messages/pathom/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2023 Wilker Lucio</div></div></div></footer></div>
<script src="/styles.488f8ab7.js"></script>
<script src="/runtime~main.868e945b.js"></script>
<script src="/main.25d8d50a.js"></script>
<script src="/1.89ba2929.js"></script>
<script src="/2.ab7b01d4.js"></script>
<script src="/3.28552344.js"></script>
<script src="/1be78505.fdabaee1.js"></script>
<script src="/46.50848efd.js"></script>
<script src="/935f2afb.b0430d98.js"></script>
<script src="/17896441.da245a3d.js"></script>
<script src="/fa4f0c38.49c03c0b.js"></script>
</body>
</html>