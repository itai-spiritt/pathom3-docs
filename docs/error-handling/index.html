<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GZFCYV0DXN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GZFCYV0DXN",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Pathom 3" href="/opensearch.xml"><title data-react-helmet="true">Error Handling | Pathom 3</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Error Handling | Pathom 3"><meta data-react-helmet="true" name="description" content="Strict Mode"><meta data-react-helmet="true" property="og:description" content="Strict Mode"><meta data-react-helmet="true" property="og:url" content="https://pathom3.wsscode.com/docs/error-handling"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://pathom3.wsscode.com/docs/error-handling"><link rel="stylesheet" href="/styles.4444d5c6.css">
<link rel="preload" href="/styles.488f8ab7.js" as="script">
<link rel="preload" href="/runtime~main.868e945b.js" as="script">
<link rel="preload" href="/main.25d8d50a.js" as="script">
<link rel="preload" href="/1.89ba2929.js" as="script">
<link rel="preload" href="/2.ab7b01d4.js" as="script">
<link rel="preload" href="/3.28552344.js" as="script">
<link rel="preload" href="/1be78505.fdabaee1.js" as="script">
<link rel="preload" href="/46.50848efd.js" as="script">
<link rel="preload" href="/935f2afb.b0430d98.js" as="script">
<link rel="preload" href="/17896441.da245a3d.js" as="script">
<link rel="preload" href="/f309eabc.dec9d971.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon_64x64.png" alt="Pathom 3"><strong class="navbar__title">Pathom 3</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a class="navbar__item navbar__link" href="/media">Media</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/icon_64x64.png" alt="Pathom 3"><strong class="navbar__title">Pathom 3</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/media">Media</a></li><li class="menu__list-item"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tutorial">Pathom Tutorial</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Using Pathom</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resolvers">Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-resolvers">Built-in Resolvers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/smart-maps">Smart Maps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eql">EQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/environment">Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cache">Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/placeholders">Placeholders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/mutations">Mutations</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/error-handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugins">Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-plugins">Built-in Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/async">Async</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/debugging">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/foreign">Foreign Environments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dynamic-resolvers">Dynamic Resolvers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How Pathom Works</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/indexes">Indexes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/planner">Planner</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/shape-descriptor">Shape Descriptor</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Integrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/integrations/graphql">GraphQL</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/hacker-news-scraper">Hacker News Scraper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/serverless-pathom-gcf">Serverless Pathom with GCF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/babashka">Scripting with Babashka</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tutorials/graphql-integration">GraphQL Integration</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Error Handling</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="strict-mode"></a>Strict Mode<a aria-hidden="true" tabindex="-1" class="hash-link" href="#strict-mode" title="Direct link to heading">#</a></h2><p>Pathom 3 is strict by default. It&#x27;s an all-or-nothing mode, or Pathom will fulfill the
full query, or it will throw an exception.</p><p>Here are the reasons that may cause Pathom to throw:</p><ul><li>Attribute doesn&#x27;t exist in the indexes</li><li>Attribute exists in the indexes, but the available data isn&#x27;t enough to reach it</li><li>Attribute wasn&#x27;t in the final output after all the processes</li><li>A resolver threw an exception*</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><ul><li>An exception to this rule is if a resolver is contained in a OR node, if there are
multiple options to fetch some attribute. It only throws when every option fails.</li></ul></div></div><p>Let&#x27;s see one example of each of those cases:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">; Attribute doesn&#x27;t exist in the indexes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (pbir/constantly-resolver :a &quot;foo&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [:b])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; EXCEPTION: Pathom can&#x27;t find a path for the following elements in the query: [:b] at path []</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; Attribute exists in the indexes, but the available data isn&#x27;t enough to reach it</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (pbir/single-attr-resolver :a :b &quot;foo&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [:b])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; EXCEPTION: Pathom can&#x27;t find a path for the following elements in the query: [:b] at path []</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; An extended version of this is also true in case of nested inputs, if Pathom can&#x27;t see</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; a path for a nested input requirement, it will consider it a plan failure.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [(pco/resolver &#x27;nested-provider</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       {::pco/output [{:a [:b]}]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       (fn [_ _]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {:a {:b 1}}))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     (pco/resolver &#x27;nested-requires</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       {::pco/input  [{:a [:c]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ::pco/output [:d]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       (fn [_ _]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         {:d 10}))])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [:d])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; EXCEPTION: Pathom can&#x27;t find a path for the following elements in the query: [:c] at path [:a]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; Attribute wasn&#x27;t in the final output after all the processes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (pco/resolver &#x27;data</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {::pco/output [:a :b :c]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (fn [_ _]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {:a 10})))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [:c])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; EXCEPTION: Required attributes missing: [:c] at path []</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; A resolver threw an exception</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (pco/resolver &#x27;error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {::pco/output [:error]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (fn [_ _]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (throw (ex-info &quot;Deu ruim.&quot; {})))))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [:error])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; EXCEPTION: Deu ruim.</span></div></div></div></div></div><p>This mode is good when:</p><ul><li>You run Pathom and use the results in-process (vs over the wire)</li><li>Your queries are small</li><li>You want all-or-nothing from the output</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="optionality"></a>Optionality<a aria-hidden="true" tabindex="-1" class="hash-link" href="#optionality" title="Direct link to heading">#</a></h3><p>In the same way that resolvers support <a href="/docs/resolvers#optional-inputs">optional inputs</a>, you can use the same syntax
to express optional attributes in your client query.</p><p>This will ignore problems to fetch that attribute, except in case of an exception. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (pco/resolver &#x27;data</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {::pco/output [:a :b :c]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (fn [_ _]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {:a 10})))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [:a (pco/? :c) (pco/? :not-on-index)])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; {:a 10} - no exception, ignore the absence of :c and :not-on-index</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; exceptions still get out</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (pco/resolver &#x27;error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {::pco/output [:error]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (fn [_ _]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (throw (ex-info &quot;Deu ruim.&quot; {})))))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [(pco/? :error)])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; EXCEPTION: Deu ruim.</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="lenient-mode"></a>Lenient Mode<a aria-hidden="true" tabindex="-1" class="hash-link" href="#lenient-mode" title="Direct link to heading">#</a></h2><p>When your Pathom scenario involves large queries (for a complex UI made with <a href="https://fulcro.fulcrologic.com/" target="_blank" rel="noopener noreferrer">Fulcro</a>
for example) you probably don&#x27;t want that a single attribute break the whole query.</p><p>This requires a more tolerant mode, which is the lenient mode in Pathom 3.</p><p>In lenient mode, errors are handled per attribute. The following sections will explain
how to handle errors in this way.</p><p>Example setup using lenient mode:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (-&gt; {:com.wsscode.pathom3.error/lenient-mode? true}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (pci/register ...)))</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="attribute-errors"></a>Attribute Errors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#attribute-errors" title="Direct link to heading">#</a></h2><p>Pathom is an abstraction around attributes, and the error handling follow this idea by
thinking of errors as things that happen per attribute.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>This is counter-intuitive from new people using Pathom, especially for users used to deal
with REST, where is normal to expect a request to either succeed or fail.</p></div></div><p>Here is an example to make the concept more concrete:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(ns com.wsscode.pathom3.docs.demos.core.error-handling</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (:require</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [com.wsscode.pathom3.connect.operation :as pco]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [com.wsscode.pathom3.interface.eql :as p.eql]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [com.wsscode.pathom3.connect.indexes :as pci]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [com.wsscode.pathom3.error :as p.error]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def identity-db</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {1 {:user/name &quot;Martin&quot;}})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pco/defresolver user-identity</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [{:keys [user/id]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {::pco/output [:user/name]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (get identity-db id))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def movies-db</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {1 {:movie/title &quot;Bacurau&quot;}})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(pco/defresolver movie-details</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [{:keys [movie/id]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {::pco/output [:movie/title]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (get movies-db id))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(def env</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {::p.error/lenient-mode? true}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [user-identity movie-details]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process env {:movie/id 1}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [:user/name :movie/title])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; {:movie/title &quot;Bacurau&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">;     :com.wsscode.pathom3.connect.runner/attribute-errors {:user/name {:com.wsscode.pathom3.error/cause :com.wsscode.pathom3.error/attribute-unreachable}}}</span></div></div></div></div></div><p>Considering the request and response, did this request succeed or failed?</p><p>Hard to say at the &quot;request level&quot;, but at the attribute level it&#x27;s clear: <code>:movie/title</code>
succeed and <code>:user/name</code> failed. At your application-level you must take this partial
failure property into account to decide what to do.</p><p>Note in lenient mode, Pathom adds the attribute <code>::pcr/attribute-errors</code> when there
is some attribute error. This map contains the error details for each attribute.</p><p>The error indicates the attribute <code>:user/name</code> wasn&#x27;t reachable, which makes sense given we
didn&#x27;t provide the <code>:user/id</code> required for it (and neither there is a resolver to
provide it).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="types-of-attribute-errors"></a>Types of attribute errors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#types-of-attribute-errors" title="Direct link to heading">#</a></h2><p>In the following diagram you can see how Pathom gets to each error type for a given
attribute:</p><div class="pathom-diagram"><div class="loading-container">Loading viz data...</div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="attribute-not-requested"></a>Attribute not requested<a aria-hidden="true" tabindex="-1" class="hash-link" href="#attribute-not-requested" title="Direct link to heading">#</a></h3><p><code>:com.wsscode.pathom3.error/attribute-not-requested</code></p><p>This error will tell that the attribute wasn&#x27;t part of the request, or part of the
initial data:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">; using the same previous setup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(let [response (p.eql/process env {:movie/id 1}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ; note this time we don&#x27;t ask for the :user/name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 [:movie/title])]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ; but check for its error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (p.error/attribute-error response :user/name))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; #:com.wsscode.pathom3.error{:cause :com.wsscode.pathom3.error/attribute-not-requested}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="attribute-unreachable"></a>Attribute unreachable<a aria-hidden="true" tabindex="-1" class="hash-link" href="#attribute-unreachable" title="Direct link to heading">#</a></h3><p><code>:com.wsscode.pathom3.error/attribute-unreachable</code></p><p>This is the</p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Pathom considers the value <code>nil</code> a success.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="node-errors"></a>Node Errors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#node-errors" title="Direct link to heading">#</a></h3><p><code>:com.wsscode.pathom3.error/node-errors</code></p><p>At this point, it means Pathom expected to fulfill the attribute, but something failed
in the process.</p><p>The <a href="/docs/planner">Pathom Plan</a> includes an index that says which node is expected to
return the value for each attribute (and if there are multiple options for an attribute,
it will have multiple nodes associated with).</p><p>For each of the nodes, Pathom will look for errors (check again on the diagram to see
the flow).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="node-exception"></a>Node exception<a aria-hidden="true" tabindex="-1" class="hash-link" href="#node-exception" title="Direct link to heading">#</a></h4><p><code>:com.wsscode.pathom3.error/node-exception</code></p><p>When the resolver throws an exception, the runner stores this associated with the node
that invoked the resolver. This is the first thing that Pathom looks for, and if there
is an error there, it returns the error.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(let [response (p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   (pbir/constantly-fn-resolver :error-demo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                     (fn [_] (throw (ex-info &quot;Example Error&quot; {})))))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 [:error-demo])]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (p.error/attribute-error response :error-demo))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{:com.wsscode.pathom3.error/cause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :com.wsscode.pathom3.error/node-errors,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :com.wsscode.pathom3.error/node-error-details</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> {1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:com.wsscode.pathom3.error/cause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.error/node-exception,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.error/exception</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   {:cause &quot;Example Error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    :data  {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    :via   [{:type    clojure.lang.ExceptionInfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             :message &quot;Example Error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             :data    {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             :at      [...]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    :trace ...}}}}</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="attribute-missing-on-output"></a>Attribute missing on output<a aria-hidden="true" tabindex="-1" class="hash-link" href="#attribute-missing-on-output" title="Direct link to heading">#</a></h4><p><code>:com.wsscode.pathom3.error/attribute-missing</code></p><p>This happens when the resolver completed with success, but the output didn&#x27;t include the
attribute.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(let [response (p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   (pco/resolver &#x27;x</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                     {::pco/output [:a :b :c]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                     (fn [_ _]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                       {:b 1 :c 2})))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 [:a])]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (p.error/attribute-error response :a))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{:com.wsscode.pathom3.error/cause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :com.wsscode.pathom3.error/node-errors,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :com.wsscode.pathom3.error/node-error-details</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> {1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:com.wsscode.pathom3.error/cause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.error/attribute-missing}}}</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ancestor-error"></a>Ancestor error<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ancestor-error" title="Direct link to heading">#</a></h4><p><code>:com.wsscode.pathom3.error/ancestor-error</code></p><p>In this case, the error didn&#x27;t happen in the node responsible for the attribute, but on
some ancestor node (some dependency behind on the chain).</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{:com.wsscode.pathom3.error/cause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :com.wsscode.pathom3.error/node-errors,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :com.wsscode.pathom3.error/node-error-details</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> {1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:com.wsscode.pathom3.error/cause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.error/ancestor-error,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.error/error-ancestor-id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.error/exception</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   #error {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :cause &quot;Example Error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :data  {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :via   [{:type    clojure.lang.ExceptionInfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    :message &quot;Example Error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    :data    {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    :at      [...]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :trace [...]}}}}</span></div></div></div></div></div><p>In this case Pathom indicates the ID of the ancestor node that failed, and the exception
there. You can view the node relationship in the graph below:</p><div class="pathom-plan-view"><div class="loading-container">Loading viz data...</div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="multiple-errors"></a>Multiple errors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#multiple-errors" title="Direct link to heading">#</a></h4><p>If there are many options for an attribute, you will get the error details of each path that failed.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(let [response (p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   [(pco/resolver &#x27;err1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      {::pco/output [:error-demo]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      (fn [_ _] (throw (ex-info &quot;One Error&quot; {}))))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    (pco/resolver &#x27;err2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      {::pco/output [:error-demo]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      (fn [_ _] (throw (ex-info &quot;Other Error&quot; {}))))])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 [:error-demo])]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (p.error/attribute-error response :error-demo))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{:com.wsscode.pathom3.error/cause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :com.wsscode.pathom3.error/node-errors,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> :com.wsscode.pathom3.error/node-error-details</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> {1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:com.wsscode.pathom3.error/cause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.error/node-exception,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.error/exception</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   #error {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :cause &quot;Other Error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :data  {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :via   [{:type    clojure.lang.ExceptionInfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    :message &quot;Other Error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    :data    {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    :at      [...]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :trace</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  [...]}},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  {:com.wsscode.pathom3.error/cause</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.error/node-exception,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   :com.wsscode.pathom3.error/exception</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   #error {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :cause &quot;One Error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :data  {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :via   [{:type    clojure.lang.ExceptionInfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    :message &quot;One Error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    :data    {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    :at      [...]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           :trace [...]}}}}</span></div></div></div></div></div><div class="pathom-plan-view"><div class="loading-container">Loading viz data...</div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="observing-resolver-errors"></a>Observing resolver errors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#observing-resolver-errors" title="Direct link to heading">#</a></h3><p>You may want to know every time some error happen, you can use the
<code>::pcr/wrap-resolver-error</code> extension:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (-&gt; (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        [(pco/resolver &#x27;err1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           {::pco/output [:error-demo]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           (fn [_ _] (throw (ex-info &quot;One Error&quot; {}))))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         (pco/resolver &#x27;err2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           {::pco/output [:error-demo]}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           (fn [_ _] (throw (ex-info &quot;Other Error&quot; {}))))])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (p.plugin/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {::p.plugin/id &#x27;err</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         :com.wsscode.pathom3.connect.runner/wrap-resolver-error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         (fn [_]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           (fn [env node error]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             (println &quot;Error: &quot; (ex-message error))))}))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [:error-demo])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; Error:  Other Error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; Error:  One Error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt; {}</span></div></div></div></div></div><p>This extension gets invoked anytime a resolver error happens, normal or batch.</p><p>If you like to have more specific handlers for batches, there is also the
<a href="/docs/plugins#pcrwrap-batch-resolver-error">::pcr/wrap-batch-resolver-error</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mutation-errors"></a>Mutation Errors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mutation-errors" title="Direct link to heading">#</a></h2><p>Mutation errors are simple. In strict mode it will throw the exception, similar to how
it handles resolvers.</p><p>On lenient mode, when a mutation fails, the value of the output is going
to be a map with the key <code>::pcr/mutation-error</code>, which has the exception.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {::p.error/lenient-mode? true}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    (pco/mutation &#x27;doit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (fn [_ _]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (throw (ex-info &quot;Mutation error&quot; {})))))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [&#x27;(doit)])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{doit {:com.wsscode.pathom3.connect.runner/mutation-error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       #error {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               :cause &quot;Mutation error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               :data  {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               :via   [{:type    clojure.lang.ExceptionInfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        :message &quot;Mutation error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        :data    {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        :at      [...]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               :trace [...]}}}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="observing-mutation-errors"></a>Observing mutation errors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#observing-mutation-errors" title="Direct link to heading">#</a></h3><p>Similar to resolvers, you can observe mutations using the <code>::pcr/wrap-mutation-error</code>
extension:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-clojure codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(p.eql/process</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  (-&gt; (pci/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (pco/mutation &#x27;doit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          (fn [_ _]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            (throw (ex-info &quot;Mutation error&quot; {})))))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (p.plugin/register</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {::p.plugin/id &#x27;err</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         :com.wsscode.pathom3.connect.runner/wrap-mutation-error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                       (fn [_]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                         (fn [env ast error]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                           (println &quot;Error on&quot; (:key ast) &quot;-&quot; (ex-message error))))}))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [&#x27;(doit)])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Error on doit - Mutation error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">; =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&#x27;{doit {:com.wsscode.pathom3.connect.runner/mutation-error</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        #error {:cause &quot;Mutation error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                :data  {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                :via   [{:type    clojure.lang.ExceptionInfo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                         :message &quot;Mutation error&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                         :data    {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                         :at      [...]}]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                :trace [...]}}}</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/wilkerlucio/pathom3-docs/edit/master/docs/error-handling.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/mutations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Mutations</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/plugins"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Plugins Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#strict-mode" class="table-of-contents__link">Strict Mode</a><ul><li><a href="#optionality" class="table-of-contents__link">Optionality</a></li></ul></li><li><a href="#lenient-mode" class="table-of-contents__link">Lenient Mode</a></li><li><a href="#attribute-errors" class="table-of-contents__link">Attribute Errors</a></li><li><a href="#types-of-attribute-errors" class="table-of-contents__link">Types of attribute errors</a><ul><li><a href="#attribute-not-requested" class="table-of-contents__link">Attribute not requested</a></li><li><a href="#attribute-unreachable" class="table-of-contents__link">Attribute unreachable</a></li><li><a href="#node-errors" class="table-of-contents__link">Node Errors</a></li><li><a href="#observing-resolver-errors" class="table-of-contents__link">Observing resolver errors</a></li></ul></li><li><a href="#mutation-errors" class="table-of-contents__link">Mutation Errors</a><ul><li><a href="#observing-mutation-errors" class="table-of-contents__link">Observing mutation errors</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Presentations</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.youtube.com/watch?v=YaHiff2vZ_o" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Navigation with Pathom 3</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=IS3i3DTUnAI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2019 - The Maximal Graph</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=yyVKf2U8YVg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2018 - Scaling Full Stack Applications</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=r3zywlNflJI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dutch Clojure Days 2018 - Clojure Graph APIâ€™s</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://clojurians.slack.com/messages/pathom/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2023 Wilker Lucio</div></div></div></footer></div>
<script src="/styles.488f8ab7.js"></script>
<script src="/runtime~main.868e945b.js"></script>
<script src="/main.25d8d50a.js"></script>
<script src="/1.89ba2929.js"></script>
<script src="/2.ab7b01d4.js"></script>
<script src="/3.28552344.js"></script>
<script src="/1be78505.fdabaee1.js"></script>
<script src="/46.50848efd.js"></script>
<script src="/935f2afb.b0430d98.js"></script>
<script src="/17896441.da245a3d.js"></script>
<script src="/f309eabc.dec9d971.js"></script>
</body>
</html>