<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-error-handling" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Error Handling | Pathom 3</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://pathom3.wsscode.com/docs/error-handling"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Error Handling | Pathom 3"><meta data-rh="true" name="description" content="Strict Mode"><meta data-rh="true" property="og:description" content="Strict Mode"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://pathom3.wsscode.com/docs/error-handling"><link data-rh="true" rel="alternate" href="https://pathom3.wsscode.com/docs/error-handling" hreflang="en"><link data-rh="true" rel="alternate" href="https://pathom3.wsscode.com/docs/error-handling" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://8YW0ZACTDN-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GZFCYV0DXN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GZFCYV0DXN",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Pathom 3" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.5e9cce91.css">
<link rel="preload" href="/assets/js/runtime~main.7be6ae2a.js" as="script">
<link rel="preload" href="/assets/js/main.670c6fc5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon_64x64.png" alt="Pathom 3" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/icon_64x64.png" alt="Pathom 3" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Pathom 3</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://blog.wsscode.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/media">Media</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wilkerlucio/pathom3" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial">Pathom Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/nouns">Nouns</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/resolvers">Using Pathom</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/resolvers">Resolvers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-resolvers">Built-in Resolvers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/smart-maps">Smart Maps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eql">EQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/environment">Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cache">Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/placeholders">Placeholders</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/mutations">Mutations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/error-handling">Error Handling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugins">Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-plugins">Built-in Plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/async">Async</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/debugging">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/foreign">Foreign Environments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dynamic-resolvers">Dynamic Resolvers</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/indexes">How Pathom Works</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/integrations/graphql">Integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tutorials/hacker-news-scraper">Tutorials</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Using Pathom</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Error Handling</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Error Handling</h1></header><h2 id="strict-mode">Strict Mode</h2><p>Pathom 3 is strict by default. It&#x27;s an all-or-nothing mode, or Pathom will fulfill the
full query, or it will throw an exception.</p><p>Here are the reasons that may cause Pathom to throw:</p><ul><li>Attribute doesn&#x27;t exist in the indexes</li><li>Attribute exists in the indexes, but the available data isn&#x27;t enough to reach it</li><li>Attribute wasn&#x27;t in the final output after all the processes</li><li>A resolver threw an exception*</li></ul><admonition type="note"><ul><li>An exception to this rule is if a resolver is contained in a OR node, if there are
multiple options to fetch some attribute. It only throws when every option fails.</li></ul></admonition><p>Let&#x27;s see one example of each of those cases:</p><pre><code class="language-clojure">; Attribute doesn&#x27;t exist in the indexes
(p.eql/process
  (pci/register
    (pbir/constantly-resolver :a &quot;foo&quot;))
  [:b])
; =&gt; EXCEPTION: Pathom can&#x27;t find a path for the following elements in the query: [:b] at path []

; Attribute exists in the indexes, but the available data isn&#x27;t enough to reach it
(p.eql/process
  (pci/register
    (pbir/single-attr-resolver :a :b &quot;foo&quot;))
  [:b])
; =&gt; EXCEPTION: Pathom can&#x27;t find a path for the following elements in the query: [:b] at path []

; An extended version of this is also true in case of nested inputs, if Pathom can&#x27;t see
; a path for a nested input requirement, it will consider it a plan failure.
(p.eql/process
  (pci/register
    [(pco/resolver &#x27;nested-provider
       {::pco/output [{:a [:b]}]}
       (fn [_ _]
         {:a {:b 1}}))
     (pco/resolver &#x27;nested-requires
       {::pco/input  [{:a [:c]}]
        ::pco/output [:d]}
       (fn [_ _]
         {:d 10}))])
  [:d])
; =&gt; EXCEPTION: Pathom can&#x27;t find a path for the following elements in the query: [:c] at path [:a]

; Attribute wasn&#x27;t in the final output after all the processes
(p.eql/process
  (pci/register
    (pco/resolver &#x27;data
      {::pco/output [:a :b :c]}
      (fn [_ _]
        {:a 10})))
  [:c])
; =&gt; EXCEPTION: Required attributes missing: [:c] at path []

; A resolver threw an exception
(p.eql/process
  (pci/register
    (pco/resolver &#x27;error
      {::pco/output [:error]}
      (fn [_ _]
        (throw (ex-info &quot;Deu ruim.&quot; {})))))
  [:error])
; =&gt; EXCEPTION: Deu ruim.
</code></pre><p>This mode is good when:</p><ul><li>You run Pathom and use the results in-process (vs over the wire)</li><li>Your queries are small</li><li>You want all-or-nothing from the output</li></ul><h3 id="optionality">Optionality</h3><p>In the same way that resolvers support <a href="/docs/resolvers#optional-inputs">optional inputs</a>, you can use the same syntax
to express optional attributes in your client query.</p><p>This will ignore problems to fetch that attribute, except in case of an exception. For example:</p><pre><code class="language-clojure">(p.eql/process
  (pci/register
    (pco/resolver &#x27;data
      {::pco/output [:a :b :c]}
      (fn [_ _]
        {:a 10})))
  [:a (pco/? :c) (pco/? :not-on-index)])
; =&gt; {:a 10} - no exception, ignore the absence of :c and :not-on-index

; exceptions still get out
(p.eql/process
  (pci/register
    (pco/resolver &#x27;error
      {::pco/output [:error]}
      (fn [_ _]
        (throw (ex-info &quot;Deu ruim.&quot; {})))))
  [(pco/? :error)])
; =&gt; EXCEPTION: Deu ruim.
</code></pre><h2 id="lenient-mode">Lenient Mode</h2><p>When your Pathom scenario involves large queries (for a complex UI made with <a href="https://fulcro.fulcrologic.com/">Fulcro</a>
for example) you probably don&#x27;t want that a single attribute break the whole query.</p><p>This requires a more tolerant mode, which is the lenient mode in Pathom 3.</p><p>In lenient mode, errors are handled per attribute. The following sections will explain
how to handle errors in this way.</p><p>Example setup using lenient mode:</p><pre><code class="language-clojure">(def env
  (-&gt; {:com.wsscode.pathom3.error/lenient-mode? true}
      (pci/register ...)))
</code></pre><h2 id="attribute-errors">Attribute Errors</h2><p>Pathom is an abstraction around attributes, and the error handling follow this idea by
thinking of errors as things that happen per attribute.</p><admonition type="info"><p>This is counter-intuitive from new people using Pathom, especially for users used to deal
with REST, where is normal to expect a request to either succeed or fail.</p></admonition><p>Here is an example to make the concept more concrete:</p><pre><code class="language-clojure">(ns com.wsscode.pathom3.docs.demos.core.error-handling
  (:require
    [com.wsscode.pathom3.connect.operation :as pco]
    [com.wsscode.pathom3.interface.eql :as p.eql]
    [com.wsscode.pathom3.connect.indexes :as pci]
    [com.wsscode.pathom3.error :as p.error]))

(def identity-db
  {1 {:user/name &quot;Martin&quot;}})

(pco/defresolver user-identity
  [{:keys [user/id]}]
  {::pco/output [:user/name]}
  (get identity-db id))

(def movies-db
  {1 {:movie/title &quot;Bacurau&quot;}})

(pco/defresolver movie-details
  [{:keys [movie/id]}]
  {::pco/output [:movie/title]}
  (get movies-db id))

(def env
  (pci/register
    {::p.error/lenient-mode? true}
    [user-identity movie-details]))

(p.eql/process env {:movie/id 1}
  [:user/name :movie/title])
; =&gt; {:movie/title &quot;Bacurau&quot;,
;     :com.wsscode.pathom3.connect.runner/attribute-errors {:user/name {:com.wsscode.pathom3.error/cause :com.wsscode.pathom3.error/attribute-unreachable}}}
</code></pre><p>Considering the request and response, did this request succeed or failed?</p><p>Hard to say at the &quot;request level&quot;, but at the attribute level it&#x27;s clear: <code>:movie/title</code>
succeed and <code>:user/name</code> failed. At your application-level you must take this partial
failure property into account to decide what to do.</p><p>Note in lenient mode, Pathom adds the attribute <code>::pcr/attribute-errors</code> when there
is some attribute error. This map contains the error details for each attribute.</p><p>The error indicates the attribute <code>:user/name</code> wasn&#x27;t reachable, which makes sense given we
didn&#x27;t provide the <code>:user/id</code> required for it (and neither there is a resolver to
provide it).</p><h2 id="types-of-attribute-errors">Types of attribute errors</h2><p>In the following diagram you can see how Pathom gets to each error type for a given
attribute:</p><div class="pathom-diagram"><div class="loading-container">Loading viz data...</div></div><h3 id="attribute-not-requested">Attribute not requested</h3><p><code>:com.wsscode.pathom3.error/attribute-not-requested</code></p><p>This error will tell that the attribute wasn&#x27;t part of the request, or part of the
initial data:</p><pre><code class="language-clojure">; using the same previous setup

(let [response (p.eql/process env {:movie/id 1}
                ; note this time we don&#x27;t ask for the :user/name
                 [:movie/title])]
  ; but check for its error
  (p.error/attribute-error response :user/name))
; =&gt; #:com.wsscode.pathom3.error{:cause :com.wsscode.pathom3.error/attribute-not-requested}
</code></pre><h3 id="attribute-unreachable">Attribute unreachable</h3><p><code>:com.wsscode.pathom3.error/attribute-unreachable</code></p><p>This is the</p><admonition type="important"><p>Pathom considers the value <code>nil</code> a success.</p></admonition><h3 id="node-errors">Node Errors</h3><p><code>:com.wsscode.pathom3.error/node-errors</code></p><p>At this point, it means Pathom expected to fulfill the attribute, but something failed
in the process.</p><p>The <a href="/docs/planner">Pathom Plan</a> includes an index that says which node is expected to
return the value for each attribute (and if there are multiple options for an attribute,
it will have multiple nodes associated with).</p><p>For each of the nodes, Pathom will look for errors (check again on the diagram to see
the flow).</p><h4 id="node-exception">Node exception</h4><p><code>:com.wsscode.pathom3.error/node-exception</code></p><p>When the resolver throws an exception, the runner stores this associated with the node
that invoked the resolver. This is the first thing that Pathom looks for, and if there
is an error there, it returns the error.</p><pre><code class="language-clojure">(let [response (p.eql/process
                 (pci/register
                   (pbir/constantly-fn-resolver :error-demo
                     (fn [_] (throw (ex-info &quot;Example Error&quot; {})))))
                 [:error-demo])]
  (p.error/attribute-error response :error-demo))
; =&gt;
{:com.wsscode.pathom3.error/cause
 :com.wsscode.pathom3.error/node-errors,

 :com.wsscode.pathom3.error/node-error-details
 {1
  {:com.wsscode.pathom3.error/cause
   :com.wsscode.pathom3.error/node-exception,

   :com.wsscode.pathom3.error/exception
   {:cause &quot;Example Error&quot;
    :data  {}
    :via   [{:type    clojure.lang.ExceptionInfo
             :message &quot;Example Error&quot;
             :data    {}
             :at      [...]}]
    :trace ...}}}}
</code></pre><h4 id="attribute-missing-on-output">Attribute missing on output</h4><p><code>:com.wsscode.pathom3.error/attribute-missing</code></p><p>This happens when the resolver completed with success, but the output didn&#x27;t include the
attribute.</p><pre><code class="language-clojure">(let [response (p.eql/process
                 (pci/register
                   (pco/resolver &#x27;x
                     {::pco/output [:a :b :c]}
                     (fn [_ _]
                       {:b 1 :c 2})))
                 [:a])]
  (p.error/attribute-error response :a))
; =&gt;
{:com.wsscode.pathom3.error/cause
 :com.wsscode.pathom3.error/node-errors,

 :com.wsscode.pathom3.error/node-error-details
 {1
  {:com.wsscode.pathom3.error/cause
   :com.wsscode.pathom3.error/attribute-missing}}}
</code></pre><h4 id="ancestor-error">Ancestor error</h4><p><code>:com.wsscode.pathom3.error/ancestor-error</code></p><p>In this case, the error didn&#x27;t happen in the node responsible for the attribute, but on
some ancestor node (some dependency behind on the chain).</p><pre><code class="language-clojure">{:com.wsscode.pathom3.error/cause
 :com.wsscode.pathom3.error/node-errors,

 :com.wsscode.pathom3.error/node-error-details
 {1
  {:com.wsscode.pathom3.error/cause
   :com.wsscode.pathom3.error/ancestor-error,

   :com.wsscode.pathom3.error/error-ancestor-id
   2,

   :com.wsscode.pathom3.error/exception
   #error {
           :cause &quot;Example Error&quot;
           :data  {}
           :via   [{:type    clojure.lang.ExceptionInfo
                    :message &quot;Example Error&quot;
                    :data    {}
                    :at      [...]}]
           :trace [...]}}}}
</code></pre><p>In this case Pathom indicates the ID of the ancestor node that failed, and the exception
there. You can view the node relationship in the graph below:</p><div class="pathom-plan-view"><div class="loading-container">Loading viz data...</div></div><h4 id="multiple-errors">Multiple errors</h4><p>If there are many options for an attribute, you will get the error details of each path that failed.</p><pre><code class="language-clojure">(let [response (p.eql/process
                 (pci/register
                   [(pco/resolver &#x27;err1
                      {::pco/output [:error-demo]}
                      (fn [_ _] (throw (ex-info &quot;One Error&quot; {}))))
                    (pco/resolver &#x27;err2
                      {::pco/output [:error-demo]}
                      (fn [_ _] (throw (ex-info &quot;Other Error&quot; {}))))])
                 [:error-demo])]
  (p.error/attribute-error response :error-demo))
; =&gt;
{:com.wsscode.pathom3.error/cause
 :com.wsscode.pathom3.error/node-errors,

 :com.wsscode.pathom3.error/node-error-details
 {1
  {:com.wsscode.pathom3.error/cause
   :com.wsscode.pathom3.error/node-exception,

   :com.wsscode.pathom3.error/exception
   #error {
           :cause &quot;Other Error&quot;
           :data  {}
           :via   [{:type    clojure.lang.ExceptionInfo
                    :message &quot;Other Error&quot;
                    :data    {}
                    :at      [...]}]
           :trace
                  [...]}},
  2
  {:com.wsscode.pathom3.error/cause
   :com.wsscode.pathom3.error/node-exception,

   :com.wsscode.pathom3.error/exception
   #error {
           :cause &quot;One Error&quot;
           :data  {}
           :via   [{:type    clojure.lang.ExceptionInfo
                    :message &quot;One Error&quot;
                    :data    {}
                    :at      [...]}]
           :trace [...]}}}}
</code></pre><div class="pathom-plan-view"><div class="loading-container">Loading viz data...</div></div><h3 id="observing-resolver-errors">Observing resolver errors</h3><p>You may want to know every time some error happen, you can use the
<code>::pcr/wrap-resolver-error</code> extension:</p><pre><code class="language-clojure">(p.eql/process
  (-&gt; (pci/register
        [(pco/resolver &#x27;err1
           {::pco/output [:error-demo]}
           (fn [_ _] (throw (ex-info &quot;One Error&quot; {}))))
         (pco/resolver &#x27;err2
           {::pco/output [:error-demo]}
           (fn [_ _] (throw (ex-info &quot;Other Error&quot; {}))))])
      (p.plugin/register
        {::p.plugin/id &#x27;err
         :com.wsscode.pathom3.connect.runner/wrap-resolver-error
         (fn [_]
           (fn [env node error]
             (println &quot;Error: &quot; (ex-message error))))}))
  [:error-demo])
; Error:  Other Error
; Error:  One Error
; =&gt; {}
</code></pre><p>This extension gets invoked anytime a resolver error happens, normal or batch.</p><p>If you like to have more specific handlers for batches, there is also the
<a href="/docs/plugins#pcrwrap-batch-resolver-error">::pcr/wrap-batch-resolver-error</a>.</p><h2 id="mutation-errors">Mutation Errors</h2><p>Mutation errors are simple. In strict mode it will throw the exception, similar to how
it handles resolvers.</p><p>On lenient mode, when a mutation fails, the value of the output is going
to be a map with the key <code>::pcr/mutation-error</code>, which has the exception.</p><pre><code class="language-clojure">(p.eql/process
  (pci/register
    {::p.error/lenient-mode? true}
    (pco/mutation &#x27;doit
      {}
      (fn [_ _]
        (throw (ex-info &quot;Mutation error&quot; {})))))
  [&#x27;(doit)])
; =&gt;
{doit {:com.wsscode.pathom3.connect.runner/mutation-error
       #error {
               :cause &quot;Mutation error&quot;
               :data  {}
               :via   [{:type    clojure.lang.ExceptionInfo
                        :message &quot;Mutation error&quot;
                        :data    {}
                        :at      [...]}]
               :trace [...]}}}
</code></pre><h3 id="observing-mutation-errors">Observing mutation errors</h3><p>Similar to resolvers, you can observe mutations using the <code>::pcr/wrap-mutation-error</code>
extension:</p><pre><code class="language-clojure">(p.eql/process
  (-&gt; (pci/register
        (pco/mutation &#x27;doit
          {}
          (fn [_ _]
            (throw (ex-info &quot;Mutation error&quot; {})))))
      (p.plugin/register
        {::p.plugin/id &#x27;err
         :com.wsscode.pathom3.connect.runner/wrap-mutation-error
                       (fn [_]
                         (fn [env ast error]
                           (println &quot;Error on&quot; (:key ast) &quot;-&quot; (ex-message error))))}))
  [&#x27;(doit)])
Error on doit - Mutation error
; =&gt;
&#x27;{doit {:com.wsscode.pathom3.connect.runner/mutation-error
        #error {:cause &quot;Mutation error&quot;
                :data  {}
                :via   [{:type    clojure.lang.ExceptionInfo
                         :message &quot;Mutation error&quot;
                         :data    {}
                         :at      [...]}]
                :trace [...]}}}
</code></pre></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wilkerlucio/pathom3-docs/edit/master/docs/error-handling.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/mutations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Mutations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/plugins"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Plugins</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#strict-mode" class="table-of-contents__link toc-highlight">Strict Mode</a><ul><li><a href="#optionality" class="table-of-contents__link toc-highlight">Optionality</a></li></ul></li><li><a href="#lenient-mode" class="table-of-contents__link toc-highlight">Lenient Mode</a></li><li><a href="#attribute-errors" class="table-of-contents__link toc-highlight">Attribute Errors</a></li><li><a href="#types-of-attribute-errors" class="table-of-contents__link toc-highlight">Types of attribute errors</a><ul><li><a href="#attribute-not-requested" class="table-of-contents__link toc-highlight">Attribute not requested</a></li><li><a href="#attribute-unreachable" class="table-of-contents__link toc-highlight">Attribute unreachable</a></li><li><a href="#node-errors" class="table-of-contents__link toc-highlight">Node Errors</a></li><li><a href="#observing-resolver-errors" class="table-of-contents__link toc-highlight">Observing resolver errors</a></li></ul></li><li><a href="#mutation-errors" class="table-of-contents__link toc-highlight">Mutation Errors</a><ul><li><a href="#observing-mutation-errors" class="table-of-contents__link toc-highlight">Observing mutation errors</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Presentations</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/watch?v=YaHiff2vZ_o" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Navigation with Pathom 3<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=IS3i3DTUnAI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2019 - The Maximal Graph<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=yyVKf2U8YVg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conj 2018 - Scaling Full Stack Applications<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=r3zywlNflJI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dutch Clojure Days 2018 - Clojure Graph API’s<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://clojurians.slack.com/messages/pathom/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Wilker Lucio</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7be6ae2a.js"></script>
<script src="/assets/js/main.670c6fc5.js"></script>
</body>
</html>